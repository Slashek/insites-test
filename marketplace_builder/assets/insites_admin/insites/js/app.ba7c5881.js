(function(e){function t(t){for(var s,r,n=t[0],l=t[1],c=t[2],d=0,m=[];d<n.length;d++)r=n[d],i[r]&&m.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},i={app:0},o=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0088":function(e,t,a){},"0736":function(e,t,a){},"0783":function(e,t,a){},"0c31":function(e,t,a){"use strict";var s=a("c2c4"),i=a.n(s);i.a},1131:function(e,t,a){},"14db":function(e,t,a){},"1d75":function(e,t,a){"use strict";var s=a("c114"),i=a.n(s);i.a},"33a9":function(e,t,a){},3511:function(e,t,a){},"391d":function(e,t,a){"use strict";var s=a("7211"),i=a.n(s);i.a},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=o(e);return a(t)}function o(e){var t=s[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(s)},i.resolve=o,e.exports=i,i.id="4678"},"4b91":function(e,t,a){},5179:function(e,t,a){},5225:function(e,t,a){},"535c":function(e,t,a){"use strict";var s=a("fc58"),i=a.n(s);i.a},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("8afe"),i=(a("cadf"),a("551c"),a("097d"),a("2b0e")),o=a("8c4f"),r=a("bc3a"),n=a.n(r),l=a("a7fe"),c=a.n(l),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},d=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ins reveal",attrs:{id:"activityModal","data-reveal":"","data-close-on-click":"false"}},[e._m(0),e.initialised?a("div",{staticClass:"grid-x grid-padding-x small-up-5 medium-up-5 large-up-5"},[a("div",{staticClass:"cell activity-type-cell",on:{click:function(t){e.changeType("meeting")}}},[a("div",{class:{"icon-wrap":!0,active:"meeting"===e.activityModel.attributes.type}},[e._m(1),a("div",{staticClass:"activity-label"},[e._v("Meeting")])])]),a("div",{staticClass:"cell activity-type-cell",on:{click:function(t){e.changeType("call")}}},[a("div",{class:{"icon-wrap":!0,active:"call"===e.activityModel.attributes.type}},[e._m(2),a("div",{staticClass:"activity-label"},[e._v("Call")])])]),a("div",{staticClass:"cell activity-type-cell",on:{click:function(t){e.changeType("email")}}},[a("div",{class:{"icon-wrap":!0,active:"email"===e.activityModel.attributes.type}},[e._m(3),a("div",{staticClass:"activity-label"},[e._v("Email")])])]),a("div",{staticClass:"cell activity-type-cell",on:{click:function(t){e.changeType("event")}}},[a("div",{class:{"icon-wrap":!0,active:"event"===e.activityModel.attributes.type}},[e._m(4),a("div",{staticClass:"activity-label"},[e._v("Event")])])]),a("div",{staticClass:"cell activity-type-cell",on:{click:function(t){e.changeType("file_note")}}},[a("div",{class:{"icon-wrap":!0,active:"file_note"===e.activityModel.attributes.type}},[e._m(5),a("div",{staticClass:"activity-label"},[e._v("File Note")])])])]):e._e(),e.initialised?a("form",{staticClass:"reveal-body"},[a("div",{staticClass:"grid-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"email"===e.activityModel.attributes.type,expression:"activityModel.attributes.type === 'email'"}],staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{label:"Subject",placeholder:"Please enter a Subject",field:"text"}})],1)]),a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("InsTextareaWrap",{attrs:{label:"Notes",placeholder:"Please enter a Notes"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"file_note"!==e.activityModel.attributes.type,expression:"activityModel.attributes.type !== 'file_note'"}],staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("label",[e._v("\n            Date\n            "),a("ins-datepicker",{attrs:{name:"date",value:e.tempDate},on:{onDateChange:e.dateChangeHandler}})],1)]),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{label:"Time",placeholder:"Please enter a Time",field:"text"}})],1),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{label:"Duration",placeholder:"Please enter a Duration",field:"text"}})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"file_note"===e.activityModel.attributes.type||"email"===e.activityModel.attributes.type,expression:"activityModel.attributes.type === 'file_note' || activityModel.attributes.type === 'email'"}],staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("div",{staticClass:"dz-wrap"},[a("div",{staticClass:"dz-label"},[e._v("Attachment")]),0===e.files.length?a("div",{staticClass:"dz placeholder"},[e._v("\n              Drop files here or Click to choose files "),a("br"),e._v("\n              (Max file size 10MB)\n            ")]):e._e(),a("div",{attrs:{id:"activityAttachments"}}),e.dzHasError?a("div",{staticClass:"dz-message"},[e._v("\n              "+e._s(e.dzErrorMessage)+"\n            ")]):e._e()])]),a("div",{staticClass:"large-12 cell"},[a("label",{staticClass:"attached-files-wrap"},[e._v("Attached:\n            "),a("ul",e._l(e.attachedFiles,function(t){return a("li",{key:t.uuid},[a("a",{attrs:{href:t.file_note,target:"_blank"}},[e._v("\n                  "+e._s(t.file_name)+"\n                ")])])}))])])])])]):e._e(),a("div",{staticClass:"reveal-footer text-right"},[a("ins-button",{attrs:{type:"button",label:"CANCEL"},on:{click:e.clearForm}}),a("ins-button",{attrs:{type:"button","v:bindlabel":"activityMode + ' ' + ACTIVITY",disabled:e.validatingForm},on:{click:e.validateForm}})],1)])},h=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reveal-header"},[a("h1",[e._v("Activity")]),a("button",{staticClass:"close-button",attrs:{"data-close":"","aria-label":"Close modal",type:"button"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-radius meeting"},[a("i",{staticClass:"activity-icon icon-briefcase-1"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-radius call"},[a("i",{staticClass:"activity-icon icon-phone-1"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-radius email"},[a("i",{staticClass:"activity-icon icon-email-1"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-radius event"},[a("i",{staticClass:"activity-icon icon-headset-1"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon-radius file-note"},[a("i",{staticClass:"activity-icon icon-notepad-1"})])}],p=(a("6b54"),a("7514"),a("a481"),a("7f7f"),a("ac6a"),a("28a5"),a("2ef0")),f=a("1157"),b=a.n(f),y=(a("5a81"),a("7bd2"),a("79e3")),g=a.n(y),_=a("3d20"),v=a.n(_),C=a("c1df"),D=a.n(C),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ins-input",{attrs:{label:e.label,value:e.value,placeholder:e.placeholder,name:e.name,field:e.field,"field-id":e.fieldId,icon:e.icon,disabled:e.disabled,readonly:e.readonly,required:e.required,maxlength:e.maxlength,"error-message":e.errorMessage,"has-error":e.hasError},on:{valueChange:e.onValueChange}})},w=[],T={name:"InsInputWrap",props:{label:String,value:String,placeholder:String,name:String,field:String,fieldId:String,icon:String,errorMessage:String,hasError:Boolean,disabled:Boolean,readonly:Boolean,required:String,maxlength:String},methods:{onValueChange:function(e){this.$emit("input",e.target.value)}}},S=T,A=(a("a300"),a("2877")),F=Object(A["a"])(S,k,w,!1,null,"98fe9eda",null);F.options.__file="InsInputWrap.vue";var I=F.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ins-select",{attrs:{label:e.label,value:e.value,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,button:e.button,small:e.small,searchable:e.searchable,multiple:e.multiple,"with-dynamic-option":e.withDynamicOption,"dynamic-placeholder":e.dynamicPlaceholder},on:{onSubmitOption:e.onSubmitOptionHandler,valueChange:e.onValueChange}},[e._t("default")],2)},P=[],M={name:"InsSelectWrap",props:{label:String,value:String,placeholder:String,dynamicPlaceholder:String,disabled:Boolean,readonly:Boolean,button:Boolean,small:Boolean,searchable:Boolean,multiple:Boolean,withDynamicOption:Boolean},methods:{onValueChange:function(e){var t=this;t.$emit("input",e.detail)},onSubmitOptionHandler:function(e){this.$emit("onSubmitOption",e.detail)}}},x=M,j=(a("391d"),Object(A["a"])(x,N,P,!1,null,"b6b847dc",null));j.options.__file="InsSelectWrap.vue";var H=j.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ins-textarea",{attrs:{label:e.label,value:e.value,placeholder:e.placeholder,name:e.name,disabled:e.disabled,readonly:e.readonly,required:e.required,maxlength:e.maxlength,"error-message":e.errorMessage,"has-error":e.hasError},on:{valueChange:e.onValueChange}})},O=[],L={name:"InsTextareaWrap",props:{label:String,value:String,placeholder:String,name:String,errorMessage:String,maxlength:String,hasError:Boolean,disabled:Boolean,readonly:Boolean,required:String},methods:{onValueChange:function(e){this.$emit("input",e.detail)}}},B=L,V=(a("7d7d"),Object(A["a"])(B,E,O,!1,null,"00f00fd0",null));V.options.__file="InsTextareaWrap.vue";var R=V.exports,W={name:"ActivityModal",components:{InsInputWrap:I,InsSelectWrap:H,InsTextareaWrap:R},computed:{activityStore:function(){return this.$store.state.CrmStore.activity},activityMode:function(){return this.$store.state.CrmStore.mode}},watch:{activityStore:function(){var e=this;if(e.activityModel=JSON.parse(JSON.stringify(e.$store.state.CrmStore.activities.activity)),"ADD"===e.activityMode&&(e.tempDuration="01:00",e.tempDate=D()().format("MM/DD/YYYY"),e.tempTime=D()().format("hh:mm A")),"UPDATE"===e.activityMode){var t=e.activityModel.attributes.attendees_id.split(",");if(b()(".jq-select2").select2("val",t),e.activityModel.attributes.file_name){var a=e.activityModel.attributes.file_name.split(","),s=e.activityModel.attributes.file_note.split(",");a.forEach(function(t,a){var i={file_name:t,file_note:s[a],uuid:e.guid()};e.attachedFiles.push(i)})}}}},data:function(){return{initialised:!1,fetchedStaffs:[],activityModel:{},tempDuration:"01:00",tempDate:D()().format("MM/DD/YYYY"),tempTime:D()().format("hh:mm A"),dzHasError:!1,dzErrorMessage:"",files:[],msgFile:!1,validatingForm:!1,dzEl:void 0,attachedFiles:[]}},props:{activity:Object},mounted:function(){var e=this;e.initialiseModal()},beforeDestroy:function(){var e=this;e.clearForm()},methods:{dateChangeHandler:function(e){var t=this;t.tempDate=e.detail.value},initialiseModal:function(){var e=this;e.activityModel=JSON.parse(JSON.stringify(this.$store.state.CrmStore.activity)),e.initialised=!0,b()(function(){b()("#activityTime").timepicker({step:5,scrollDefault:"now",timeFormat:"h:i A"}).on("changeTime",function(t){e.activityModel.attributes.time=t.target.value}),b()("#activityDuration").timepicker({step:5,appendTo:"body",timeFormat:"H:i"}).on("changeTime",function(t){e.activityModel.attributes.duration=t.target.value}),e.dzEl=new g.a("#activityAttachments",{url:"/",method:"post",autoProcessQueue:!1,uploadMultiple:!0,addRemoveLinks:!0,paramName:"file",acceptedFiles:".doc, .docx, .pdf, .csv, .xml, .txt, .jpeg, .JPEG, .jpg, .JPG, .png, .PNG, .xls, .xlsx, .ppt, .pptx, .msg, .eml, .oft, .mht, .zip",maxFiles:999,maxFilesize:10,filesizeBase:1024,dictDefaultMessage:"\n              Drop files here or Click to choose files<br>\n              (Max file size 10MB)\n          ",dictRemoveFile:"remove",init:function(){var t=this;t.on("maxfilesexceeded",function(e){t.removeAllFiles(),t.addFile(e)}),t.on("addedfile",function(t){t.uuid=e.guid();var a=["doc","docx","pdf","csv","xml","txt","jpeg","JPEG","jpg","JPG","png","PNG","xls","xlsx","ppt","pptx","msg","eml","oft","mht"],s=t.name.slice(2+(t.name.lastIndexOf(".")-1>>>0)),i=!1,o={file_name:"",file_note:"",uuid:"",is_msg:!1};a.forEach(function(e){e!==s||(i=!0)}),"msg"!=s&&"eml"!=s||(o.is_msg=!0);var r=t.size<10999999;if(i&&r){e.dzHasError=!1;var n=new FileReader;n.onload=function(a){o.file_note=a.target.result,o.file_name=t.name,o.uuid=t.uuid,e.files.push(o),e.msgFile=!1},n.readAsDataURL(t)}else r||(e.fileName="",e.dzErrorMessage="Max file size is 10MB.",e.dzHasError=!0)}),t.on("removedfile",function(t){p["remove"](e.files,{uuid:t.uuid})}),t.on("error",function(e){t.removeFile(e)})}})})},getStaffs:function(){var e=this,t=this.apiBaseUrl+"/staffs";fetch(t,{method:"GET"}).then(function(e){return e.json()}).then(function(t){e.fetchedStaffs=t.data,e.initialiseModal()}).catch(function(e){})},changeType:function(e){var t=this;t.activityModel.attributes.type=e},removeLocKeys:function(e){return e.is_msg&&(e.file_note=e.file_note.replace("data:;","data:application/vnd.ms-outlook;")),delete e["uuid"],delete e["is_msg"],e},validateForm:function(){var e=this;e.validatingForm=!0,"file_note"===e.activityModel.attributes.type&&(0===e.files.length?(e.dzHasError=!0,e.dzErrorMessage="Attachment is required"):e.activityModel.attributes.attachment=e.files.map(e.removeLocKeys));var t=b()(".jq-select2").select2("val"),a=[],s=[],i=localStorage.getItem("pos_id");t.forEach(function(t){var o=e.fetchedStaffs.find(function(e){return e.id===t});a.push(o.id),s.push(o.attributes.first_name+" "+o.attributes.last_name),i===o.attributes.pos_id&&"ADD"===e.activityMode&&(e.activityModel.attributes.first_name=o.attributes.first_name,e.activityModel.attributes.last_name=o.attributes.last_name,e.activityModel.attributes.entity_id=o.attributes.pos_id,e.activityModel.attributes.staff_id=o.id)}),e.activityModel.attributes.attendees_id=a.join(","),e.activityModel.attributes.attendees=s.join(",");var o=e.tempDuration.split(":"),r=3600*parseInt(o[0]),n=60*parseInt(o[1]),l=r+n;e.activityModel.attributes.duration=l;var c="".concat(e.tempDate," ").concat(e.tempTime);e.activityModel.attributes.time=D()(c,"MM/DD/YYYY hh:mm A").format("HH:mm:ss"),e.activityModel.attributes.date=D()(e.tempDate).format("YYYY-MM-DD"),"ADD"===e.activityMode?e.postActivity():"UPDATE"===e.activityMode&&e.putActivity()},postActivity:function(){var e=this,t=e.$router.history.current.params.id,a=e.apiBaseUrl+"/checks/"+t+"/activities",s=e.activityModel.attributes;b.a.ajax({url:a,method:"POST",data:JSON.stringify(s),success:function(t){jQuery("#activityModal").foundation("close");var a=this.$router.history.current.params.id,s=e.apiBaseUrl+"/checks/"+a+"/activities";e.$store.dispatch("getTimeline",{url:s}),v()("","Activity added successfully.","success"),e.validatingForm=!1},error:function(t){console.log("error: ",t),v()("","Failed to add activity. Please try again.","error"),e.validatingForm=!1}})},putActivity:function(){var e=this,t="".concat(e.apiBaseUrl,"/activities/").concat(e.activityModel.id),a=e.activityModel.attributes;b.a.ajax({url:t,method:"PUT",data:JSON.stringify(a),success:function(t){jQuery("#activityModal").foundation("close");var a=this.$router.history.current.params.id,s=this.apiBaseUrl+"/checks/"+a+"/activities";this.$store.dispatch("getTimeline",{url:s}),v()("","Activity updated successfully.","success"),e.validatingForm=!1},error:function(t){v()("","Failed to update activity. Please try again.","error"),e.validatingForm=!1}})},guid:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},clearForm:function(){var e=this;e.activityModel={attributes:{attendees_id:[],attendees:[],attachment:[],client_type:"",company_uuid:"",site_id:"",date:D()().format("DD/MM/YYYY"),duration:"",entity_id:"",file_name:"",file_note:"",first_name:"Shane",staff_id:"76418",last_name:"McGeorge",notes:"",subject:"",time:D()().format("hh:mm A"),type:"meeting"},type:"activities"},e.tempDuration="01:00",e.dzEl.removeAllFiles(!0),b()(".jq-select2").select2("val",[]),e.attachedFiles=[]}}},z=W,U=(a("8047"),Object(A["a"])(z,m,h,!1,null,"14ab4bf2",null));U.options.__file="ActivityModal.vue";var K=U.exports,J={name:"app",components:{ActivityModal:K},methods:{getAdmins:function(){var e=this;this.$http.get("/api/get-all-administrator-list-data.json").then(function(t){e.$store.commit("setAdministratorList",t.data.items)}).catch(this.errorHandler)},errorHandler:function(e){console.error("error",e),toastIt("error","Failed to load system fields.",this.ops)}},mounted:function(){this.$store.dispatch("fetchSystemFields","company_type"),this.$store.dispatch("fetchSystemFields","contact_type"),this.$store.dispatch("fetchSystemFields","industry_type"),this.$store.dispatch("fetchSystemFields","google_maps_api_key"),this.getAdmins()}},Y=J,q=(a("9d14"),Object(A["a"])(Y,u,d,!1,null,null,null));q.options.__file="App.vue";var G=q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 small-12 medium-12 cell",staticStyle:{"margin-bottom":"30px"}},[a("ins-filter",{attrs:{id:"boom","with-date-filter":"","date-title":"Date Period"}},[a("ins-filter-item",{attrs:{name:"Status",options:'["All Status", "Pending", "Completed", "Declined"]'}})],1)],1),a("div",{staticClass:"large-3 medium-6 small-12 cell margin-bottom-30"},[a("ins-card",[a("ins-sparkline",{attrs:{"data-src":"https://8podbzvdw2.execute-api.us-east-2.amazonaws.com/insites-dummy-sparkline-deployment/insites-dummy-get-sparkline"}})],1)],1),a("div",{staticClass:"large-3 medium-6 small-12 cell margin-bottom-30"},[a("ins-card",[a("ins-sparkline",{ref:"Users",attrs:{id:"users",icon:"icon-user-1",name:"Users",value:"720",percentage:"7",description:"From previous year",movement:"decrease"}})],1)],1),a("div",{staticClass:"large-3 medium-6 small-12 cell margin-bottom-30"},[a("ins-card",[a("ins-sparkline",{ref:"BounceRate",attrs:{id:"bounceRate",icon:"icon-analytic-1",name:"Bounce Rate",value:"86%",percentage:"12",description:"From previous year",movement:"increase"}})],1)],1),a("div",{staticClass:"large-3 medium-6 small-12 cell margin-bottom-30"},[a("ins-card",[a("ins-sparkline",{ref:"Goals",attrs:{id:"goals",icon:"icon-goal-1",name:"Goals",value:"2.5K",percentage:"7",description:"From previous year",movement:"decrease"}})],1)],1),a("div",{staticClass:"large-12 medium-12 small-12 cell margin-bottom-30"},[a("ins-card",[a("ins-line-chart",{attrs:{id:"lineChart",name:"Sessions","data-src":"https://8yu847n8rb.execute-api.us-east-2.amazonaws.com/insites-linegraph2-deployment/insites-dummy-linegraph2"}})],1)],1),a("div",{staticClass:"large-12 medium-12 small-12 cell margin-bottom-30"},[a("ins-base-table",{attrs:{id:"insBaseTable","searchbar-placeholder":"Search Default Column..."}})],1),a("div",{staticClass:"large-12 medium-12 small-12 cell margin-bottom-30"},[a("ins-card",[a("ins-bar-chart",{attrs:{id:"barChart",name:"Column Chart","data-src":"https://9p1pa4b3fa.execute-api.us-east-2.amazonaws.com/insites-barchart-deployment/insites-dummy-barchart"}})],1)],1)])])},Q=[],Z=(a("20d6"),a("55dd"),a("6762"),a("2fdb"),a("456d"),{name:"Overview",components:{InsInputWrap:I},data:function(){return{sampleModel:"",sparkLineSampleData:[["2017-12-18",13],["2017-12-25",0],["2018-01-01",0],["2018-01-08",8],["2018-01-15",5],["2018-01-22",2],["2018-01-29",1],["2018-02-05",1],["2018-02-12",1],["2018-02-19",0],["2018-02-26",1],["2018-03-05",0],["2018-03-12",0],["2018-03-19",2],["2018-03-26",1],["2018-04-02",11],["2018-04-09",2],["2018-04-16",2],["2018-04-23",0],["2018-04-30",0],["2018-05-07",0],["2018-05-14",0],["2018-05-21",1],["2018-05-28",0]]}},mounted:function(){var e=this;setTimeout(function(){e.$refs.Users.chartData=e.sparkLineSampleData,e.$refs.BounceRate.chartData=e.sparkLineSampleData,e.$refs.Goals.chartData=e.sparkLineSampleData},1e3);var t=document.getElementById("insBaseTable"),a=[],s=[],i=[],o=1,r=10,n="",l="";function c(e){t.loadingScreen=!0,r=e.detail.pageSize,o=e.detail.pageNumber,y()}function u(e){t.loadingScreen=!0,n=e.detail.value,n?(s=[],a.forEach(function(e){Object.keys(e).forEach(function(t){if("Default Column"===t){var a=e[t];a.toLowerCase().includes(n.toLowerCase())&&s.push(e)}})}),l&&s.length>1&&s.sort(g(l)),t.pageNumber=1,y(),s.length||(t.loadingScreen=!0,t.loaderTitle="",t.loaderMessage='No result found for "'+n+'"',t.loaderIcon="")):y()}function d(e){l="asc"===e.detail.order?e.detail.keyword:"-".concat(e.detail.keyword),n?s.sort(g(l)):a.sort(g(l)),y()}function m(e){"Archive"===e.detail.action&&f(e.detail.selections)}function h(e){"Archive"===e.detail.action&&p(e.detail.data)}function p(e){swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="Are you sure you want to archive this item?">\n            </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(t){b(e),y()})}function f(e){var a=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to archive these items?">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(s){if(s.value){var i=0;e.forEach(function(s){a.deleteItem(s),i++,e.length===i&&(t.resetSelections(),y())})}})}function b(e){var t,i;a&&(t=a.findIndex(function(t){return t.Id===e})),s&&(i=s.findIndex(function(t){return t.Id===e})),t>-1&&a.splice(t,1),i>-1&&s.splice(i,1)}function y(){var e=o*r,l=e-r+1;i=[],n?(s.forEach(function(t,a){a>=l&&a<=e?i.push(t):s.length<r&&i.push(t)}),t.totalCount=s.length):(a.forEach(function(t,a){a>=l&&a<=e&&i.push(t)}),t.totalCount=a.length),t.tableData=i,t.loadingScreen=!1}function g(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,s){var i=a[e]<s[e]?-1:a[e]>s[e]?1:0;return i*t}}function _(){t.loadingScreen=!0,t.loaderTitle="Processing Your Data",t.loaderMessage="Just a moment, we're fetching and processing your data.",t.loaderIcon="processing";var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);a=e.list,t.totalCount=e.count,t.tableHeaders=[{label:"Default Column",type:"string",sortable:!0,hasLink:!0},{label:"Date Column",type:"string",sortable:!0},{label:"Number Column",type:"number",sortable:!0},{label:"Currency Column",type:"currency",sortable:!0}],y()}},e.open("GET","https://ag64gmtsc0.execute-api.us-east-2.amazonaws.com/insites-dummy-deployment/insites-dummy-get-table",!0),e.send()}t.loadingScreen=!0,t.bulkActions=["Archive"],t.rowActions=["Archive"],t.addEventListener("onPaginationChange",c),t.addEventListener("onTableSearch",u),t.addEventListener("onTableSort",d),t.addEventListener("onTableBulkAction",m),t.addEventListener("onTableRowAction",h),$("ins-filter-item").click(function(){var e=$(".filter-item__options");e.toggleClass("active")}),_()}}),ee=Z,te=(a("996a"),Object(A["a"])(ee,X,Q,!1,null,"95bd056e",null));te.options.__file="Overview.vue";var ae=te.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ins-button",{attrs:{field:"addNewAdmin",id:"addNewAdmin",label:"Add New Admin User",color:"blue",solid:"true",size:"medium",disabled:"false"},on:{click:function(t){e.addNewAdmin()}}}),a("ins-base-table",{attrs:{id:"insBaseTable","searchbar-placeholder":"Search by Name or Email..."},on:{onPaginationChange:e.tablePaginationHandler,onTableSearch:e.tableSearchHandler,onTableSort:e.tableSortHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler}})],1)},ie=[],oe={name:"ListUsers",data:function(){return{source:"/api/get-all-administrator-data.json",searchSource:"/api/search-administrators-data.json",location:"",insBaseTable:"",rawData:[],filteredData:[],displayedData:[],tableHeaders:[],totalCount:0,pageNumber:1,pageSize:10,searchKeyword:"",sortedKeyword:"",sortedBy:"asc",formModel:{form_configuration_name:"delete_admin_user",form:{profiles_attributes:{administrator_attributes:{properties_attributes:{is_enabled:"false"}}}}},headers:{"X-CSRF-Token":"3b70c2a1087ba76b70ae54f620cd8710da18ba55","X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"},continueDeletion:!1}},methods:{addNewAdmin:function(){this.$store.commit("pushFormType","add"),ra.push("/manage-admin-user")},tablePaginationHandler:function(e){this.insBaseTable.loadingScreen=!0,this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchDataFromSrc()},tableSearchHandler:function(e){(13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword)&&(this.searchKeyword=e.detail.value,this.pageNumber=1,this.insBaseTable.pageNumber=1,this.fetchDataFromSrc())},tableSortHandler:function(e){this.sortedKeyword="Admin User"===e.detail.keyword||"Name"===e.detail.keyword?"first_name":e.detail.keyword,this.sortedBy=e.detail.order,this.fetchDataFromSrc()},tableBulkActionHandler:function(e){"Remove"===e.detail.action&&this.archiveSelection(e.detail.selections)},tableRowActionHandler:function(e){"Remove"===e.detail.action?this.archiveItem(e.detail.data):"Edit"===e.detail.action?(this.$store.commit("pushUserData",e.detail.data),this.$store.commit("pushFormType","edit"),this.viewItem()):"View"===e.detail.action&&(this.$store.commit("pushUserData",e.detail.data),this.$store.commit("pushFormType","view"),this.viewItem())},viewItem:function(){ra.push("/manage-admin-user")},archiveItem:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to remove this user?">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Remove"}).then(function(a){a.value&&t.deleteItem(e)})},archiveSelection:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to remove these users?">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Remove"}).then(function(a){if(a.value){var s=0;t.continueDeletion=!0,e.forEach(function(a){t.continueDeletion&&(t.deleteItem(a),s++,e.length===s&&(t.continueDeletion=!1,t.insBaseTable.resetSelections()))})}})},deleteItem:function(e){var t=this,a="".concat(this.location,"/api/users/").concat(e.id),s=JSON.stringify(this.formModel),i={closeHtml:'<button><i class="icon-close-1"></i></button>',closeButton:!0,timeOut:0,extendedTimeOut:0,preventDuplicates:!0};this.$http.put(a,s,{headers:this.headers}).then(function(e){t.continueDeletion||(toastIt("success","User has been removed.",i),t.fetchDataFromSrc())}).catch(function(e){t.continueDeletion=!1,t.fetchDataFromSrc(),toastIt("error","Failed to remove user. Please try again.",i)})},processTableData:function(){this.insBaseTable.tableData=this.rawData,this.insBaseTable.loadingScreen=!1},dynamicKeySort:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,s){var i=a[e]<s[e]?-1:a[e]>s[e]?1:0;return i*t}},fetchDataFromSrc:function(){var e=this;this.insBaseTable.loadingScreen=!0,this.insBaseTable.loaderTitle="Processing Your Data",this.insBaseTable.loaderMessage="Just a moment, we're fetching and processing your data.",this.insBaseTable.loaderIcon="processing";var t=this,a="".concat(this.source,"?size=").concat(this.pageSize,"&page=").concat(this.pageNumber,"&sortBy=").concat(this.sortedKeyword,"&orderBy=").concat(this.sortedBy);this.searchKeyword&&(a="".concat(this.searchSource,"?size=").concat(this.pageSize,"&page=").concat(this.pageNumber,"&sortBy=").concat(this.sortedKeyword,"&orderBy=").concat(this.sortedBy,"&keyword=").concat(this.searchKeyword)),this.$http.get(a).then(function(a){var s=a.data.items.results;s.length?(t.insBaseTable.totalCount=a.data.items.total_entries,e.bindTableData(s)):(e.insBaseTable.loaderTitle="",e.searchKeyword?e.insBaseTable.loaderMessage='No results for "'.concat(e.searchKeyword,'"'):e.insBaseTable.loaderMessage="There are no Admin Users yet.",e.insBaseTable.loaderIcon="no-data")}).catch(function(t){console.error("Error: "+t),e.errorHandler()})},errorHandler:function(){this.insBaseTable.loaderTitle=void 0,this.insBaseTable.loaderMessage="Failed to load Data. Please try again.",this.insBaseTable.loaderIcon="error"},bindTableData:function(e){var t=this,a=[];e.forEach(function(s){var i="";if(null===s.contact_number)i="";else{var o=null!==s.contact_number.mobile_phone_country_code?"+"+s.contact_number.mobile_phone_country_code:"",r=null!==s.contact_number.mobile_phone_area_code?s.contact_number.mobile_phone_area_code:"",n=null!==s.contact_number.mobile_phone_number?s.contact_number.mobile_phone_number:"";i="".concat(o," ").concat(r," ").concat(n)}var l={id:s.id,"First Name":null!==s.first_name||""!==s.first_name?s.first_name:"","Last Name":null!==s.last_name||""!==s.last_name?s.last_name:"",Name:"".concat(s.first_name?s.first_name:""," ").concat(s.last_name?s.last_name:""),Email:null!==s.email||""!==s.email?s.email:"",Role:"Administrator",Company:null===s.administrator_details.company_name?"":s.administrator_details.company_name,"Mobile Phone":i,"Mobile Phone Country Code":null===s.contact_number?"":s.contact_number.mobile_phone_country_code,"Mobile Phone Area Code":null===s.contact_number?"":s.contact_number.mobile_phone_area_code,"Mobile Phone Number":null===s.contact_number?"":s.contact_number.mobile_phone_number,"Last Activity":D()(s.updated_at).calendar(null,{sameElse:"Do MMM YYYY"})};a.push(l),t.rawData=a,e.length===a.length&&t.processTableData()})},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Admin Users"):setTimeout(function(){e.setInsRendererLabel()},300)}},mounted:function(){this.setInsRendererLabel(),"localhost"!==window.location.hostname?this.headers["X-CSRF-Token"]=JSON.parse(document.getElementById("formConfig").innerHTML):(this.headers["X-CSRF-Token"]="3b70c2a1087ba76b70ae54f620cd8710da18ba55",this.location="https://insites-poc.staging-sydney.near-me.com"),this.insBaseTable=document.getElementById("insBaseTable"),this.insBaseTable.bulkActions=["Remove"],this.insBaseTable.rowActions=["View","Edit","Remove"],this.insBaseTable.tableHeaders=[{label:"Name",type:"string",sortable:!0,hasLink:!0},{label:"Email",type:"string",sortable:!0},{label:"Role",type:"string",sortable:!1},{label:"Mobile Phone",type:"string",sortable:!1},{label:"Last Activity",type:"string",sortable:!1}],this.fetchDataFromSrc()}},re=oe,ne=(a("6247"),Object(A["a"])(re,se,ie,!1,null,"024cac74",null));ne.options.__file="ListUsers.vue";var le=ne.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["my-profile"===e.formType||"change-password"===e.formType?a("div",{staticClass:"large-12 cell"},[a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("form",{staticClass:"large-5 medium-6 small-12 cell no-pd-left",attrs:{id:"userFormId",name:"userForm",action:"#","data-abide":"","data-live-validate":"true",novalidate:"",onsubmit:"event.preventDefault()"},on:{submit:e.bindValues}},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("User Details")]),a("InsInputWrap",{attrs:{id:"userFirstNameField",name:"userFirstNameField",placeholder:"First Name",label:"First Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"First Name is required."},model:{value:e.userData["First Name"],callback:function(t){e.$set(e.userData,"First Name",t)},expression:"userData['First Name']"}})],1),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{id:"userLastNameField",name:"userLastNameField",placeholder:"Last Name",label:"Last Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"Last Name is required."},model:{value:e.userData["Last Name"],callback:function(t){e.$set(e.userData,"Last Name",t)},expression:"userData['Last Name']"}})],1),a("div",{staticClass:"large-12 cell"},[a("ins-input-tel",{ref:"insInputTel",attrs:{label:"Mobile Phone","area-code":"userDataAreaCode","areacode-placeholder":"Area Code","phone-number":"userDataPhoneNumber","phonenum-placeholder":"Phone Number","phonenum-value":e.phoneNumValue,"areacode-value":e.areaCodeValue,readonly:"view"===e.formType}})],1),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{id:"userCompanyField",name:"userCompanyField",placeholder:"Company",label:"Company",field:"company",autocomplete:"off"},model:{value:e.userData["Company"],callback:function(t){e.$set(e.userData,"Company",t)},expression:"userData['Company']"}})],1)])]),a("div",{staticClass:"grid-x grid-padding-x grid-padding-y"},[a("div",{staticClass:"large-12 cell text-right"},[a("ins-button",{attrs:{type:"button",id:"cancelButtonDetails",label:"Cancel",color:"blue",outlined:"true",size:"normal",disabled:e.bindingValues},on:{onClickInsButton:function(t){e.backToList()}}}),a("ins-button",{attrs:{type:"submit",id:"submitButtonDetails",color:"blue",solid:"true",size:"normal",label:e.buttonLabel,disabled:e.bindingValues}})],1)])],1),a("form",{staticClass:"large-5 medium-6 small-12 cell",attrs:{id:"userFormPasswordId",name:"userFormPasswordId",action:"#","data-abide":"","data-live-validate":"true",novalidate:"",onsubmit:"event.preventDefault()"},on:{submit:e.changePassword}},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Account Details")]),a("InsInputWrap",{ref:"userEmailField",attrs:{id:"userEmailField",name:"userEmailField",placeholder:"Email",label:"Email*",field:"email",autocomplete:"off",required:"true",errorMessage:"Email is invalid.",readonly:"view"===e.formType||"my-profile"===e.formType},model:{value:e.userData["Email"],callback:function(t){e.$set(e.userData,"Email",t)},expression:"userData['Email']"}})],1),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{ref:"userPasswordField",attrs:{id:"userPasswordField",name:"userPasswordField",placeholder:"Password",label:"Password*",field:"Password",autocomplete:"off",required:"true",errorMessage:"Password is required and not less than 6 characters."},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)])]),a("div",{staticClass:"grid-x grid-padding-x grid-padding-y"},[a("div",{staticClass:"large-12 cell text-right"},[a("ins-button",{attrs:{type:"submit",id:"submitButtonDetails",label:"Update Password",color:"blue",solid:"true",size:"normal",disabled:e.bindingValues}})],1)])],1)])])]):e._e(),"my-profile"!==e.formType&&"change-password"!==e.formType?a("div",[a("form",{attrs:{id:"userFormId",name:"userForm",action:"#","data-abide":"","data-live-validate":"true",novalidate:"",onsubmit:"event.preventDefault()"},on:{submit:e.bindValues}},[a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-10 medium-12 small-12"},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-6 medium-6 small-12 cell"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("User Details")]),a("InsInputWrap",{attrs:{id:"userFirstNameField",name:"userFirstNameField",placeholder:"First Name",label:"First Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"First Name is required.",readonly:"view"===e.formType},model:{value:e.userData["First Name"],callback:function(t){e.$set(e.userData,"First Name",t)},expression:"userData['First Name']"}})],1),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{id:"userLastNameField",name:"userLastNameField",placeholder:"Last Name",label:"Last Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"Last Name is required.",readonly:"view"===e.formType},model:{value:e.userData["Last Name"],callback:function(t){e.$set(e.userData,"Last Name",t)},expression:"userData['Last Name']"}})],1),a("div",{staticClass:"large-12 cell"},[a("ins-input-tel",{ref:"insInputTel",attrs:{label:"Mobile Phone","area-code":"userDataAreaCode","areacode-placeholder":"Area Code","phone-number":"userDataPhoneNumber","phonenum-placeholder":"Phone Number","phonenum-value":e.phoneNumValue,"areacode-value":e.areaCodeValue,readonly:"view"===e.formType}})],1),a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{attrs:{id:"userCompanyField",name:"userCompanyField",placeholder:"Company",label:"Company",field:"company",autocomplete:"off",readonly:"view"===e.formType},model:{value:e.userData["Company"],callback:function(t){e.$set(e.userData,"Company",t)},expression:"userData['Company']"}})],1)])]),a("div",{staticClass:"large-6 medium-6 small-12 cell"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Account Details")]),a("InsInputWrap",{ref:"userEmailField",attrs:{id:"userEmailField",name:"userEmailField",placeholder:"Email",label:"Email*",field:"email",autocomplete:"off",required:"true",errorMessage:"Email is invalid.",readonly:"view"===e.formType||"my-profile"===e.formType},model:{value:e.userData["Email"],callback:function(t){e.$set(e.userData,"Email",t)},expression:"userData['Email']"}})],1),"add"===e.formType?a("div",{staticClass:"large-12 cell"},[a("InsInputWrap",{ref:"userPasswordField",attrs:{id:"userPasswordField",name:"userPasswordField",placeholder:"Password",label:"Password*",field:"Password",autocomplete:"off",required:"true",errorMessage:"Password is required and not less than 6 characters."},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()])])])])])],1)])]),a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-y"},[a("div",{staticClass:"large-10 text-right cell submit-btn-wrap inline"},[a("ins-button",{attrs:{type:"button",id:"cancelButtonDetails",label:"Cancel",color:"blue",outlined:"true",size:"normal",disabled:e.bindingValues},on:{onClickInsButton:function(t){e.backToList()}}}),"view"!==e.formType?a("ins-button",{attrs:{type:"submit",id:"submitButtonDetails",label:e.buttonLabel,color:"blue",solid:"true",size:"normal",disabled:e.bindingValues}}):e._e(),"add"==e.formType?a("ins-button",{attrs:{type:"button",id:"saveAddMoreButtonDetails",label:"Save and Create Another",color:"blue",solid:"true",size:"normal",disabled:e.bindingValues},on:{onClickInsButton:function(t){e.saveAddMore()}}}):e._e()],1)])])])]):e._e()])},ue=[],de=(a("96cf"),a("3040")),me=(a("1c4c"),{name:"ViewUserDetails",components:{InsInputWrap:I},data:function(){return{updateExistUrl:"",userData:{},formType:this.$store.state.AdminStore.formType,formMethod:"",formName:"",fromURL:"/api/users",authToken:"",location:"",userCountryCode:"au",password:"",confirmPassword:"",buttonLabel:"Create",addMore:!1,formModel:{form_configuration_name:"delete_admin_user",form:{profiles_attributes:{administrator_attributes:{properties_attributes:{is_enabled:"true"}}}}},headers:{"X-CSRF-Token":"3b70c2a1087ba76b70ae54f620cd8710da18ba55","X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"},toastMsg:"",toastOpt:{closeHtml:'<button><i class="icon-close-1"></i></button>',closeButton:!0,timeOut:0,extendedTimeOut:0},sourceProfile:"/api/get-current-user-data.json",areaCodeValue:"",phoneNumValue:"",bindingValues:!1}},methods:{backToList:function(){"my-profile"===this.formType?document.querySelector("ins-sidebar-item").routePageHandler():this.$router.push("/admin-users")},saveAddMore:function(){this.addMore=!0,this.bindValues()},onInputHandler:function(e){e.target.id},formValidate:function(e){var t=0,a=this;return Array.from(e.getElementsByClassName("ins-form-field")).forEach(function(e){!0!==e.hasAttribute("required")&&"true"!=e.getAttribute("required")||(t+=a.validateInput(e)),"email"===e.getAttribute("type").toLowerCase()&&(t+=a.validateEmail(e)),"password"===e.getAttribute("type").toLowerCase()&&(t+=a.validatePassword(e))}),!(t>0)},validatePassword:function(e){return""===e.value.trim()||e.value.length<6?(this.invalidFieldNotif(e),1):(this.validFieldNotif(e),0)},validateInput:function(e){return""===e.value.trim()||null===e.value?(this.invalidFieldNotif(e),1):(this.validFieldNotif(e),0)},invalidFieldNotif:function(e){e.closest("ins-input").setAttribute("has-error",!0)},validFieldNotif:function(e){e.closest("ins-input").removeAttribute("has-error")},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return 1==t.test(String(e.value).toLowerCase())?(this.validFieldNotif(e),0):(this.invalidFieldNotif(e),1)},changePassword:function(){this.formType="change-password",this.bindValues()},bindValues:function(){this.bindingValues=!0;var e={},t=this.$refs.insInputTel.getCountryData().dialCode,a="";"change-password"===this.formType&&(a=document.getElementById("userFormPasswordId"),e={form_configuration_name:this.formName,form:{email:this.userData["Email"],password:this.password}}),"add"===this.formType?(a=document.getElementById("userFormId"),e={form_configuration_name:this.formName,form:{email:this.userData["Email"],first_name:this.userData["First Name"],last_name:this.userData["Last Name"],name:this.userData["First Name"]+" "+this.userData["Last Name"],password:this.password,profiles_attributes:{administrator_attributes:{properties_attributes:{is_enabled:"true",company:$("#userCompanyField").val()}},contact_number_attributes:{properties_attributes:{mobile_phone_country_code:t,mobile_phone_area_code:document.getElementsByName("userDataAreaCode")[0].value,mobile_phone_number:document.getElementsByName("userDataPhoneNumber")[0].value}}}}}):(a=document.getElementById("userFormId"),e=this.constructPayload(this.formName)),"add"===this.formType?this.toastMsg="User":"change-password"===this.formType?this.toastMsg="Your Password":(this.addMore=!1,this.toastMsg="Your user"),this.formValidate(a)?this.submitForm(e):this.bindingValues=!1},constructPayload:function(e){var t=this.$refs.insInputTel.getCountryData().dialCode;return{form_configuration_name:e,form:{email:this.userData["Email"],first_name:this.userData["First Name"],last_name:this.userData["Last Name"],name:this.userData["First Name"]+" "+this.userData["Last Name"],profiles_attributes:{administrator_attributes:{properties_attributes:{is_enabled:"true",company:$("#userCompanyField").val()}},contact_number_attributes:{properties_attributes:{mobile_phone_country_code:t,mobile_phone_area_code:document.getElementsByName("userDataAreaCode")[0].value,mobile_phone_number:document.getElementsByName("userDataPhoneNumber")[0].value}}}}}},submitForm:function(e,t,a){var s=this,i={"X-Requested-With":"XMLHttpRequest","X-CSRF-Token":this.authToken,Accept:"application/json","Content-Type":"application/json"},o={headers:i,method:a||this.formMethod,data:JSON.stringify(e),success:function(e){s.successHandler()},error:function(e){s.errorHandler(e)}},r=t||this.formURL;this.formType,$.ajax(r,o)},checkIfAdministrator:function(){var e=this,t="".concat(this.location,"/admin/get-customer-profile-data.json?email=").concat(this.userData["Email"]);return this.$http.get(t).then(function(t){var a=t.data.items;if(a){var s=a.results[0].administrator_details;if(s){var i=s.is_enabled;return e.updateExistUrl="".concat(e.location,"/api/users/").concat(a.results[0].id),!!i&&"true"===i}return!1}return!1}).catch(function(t){toastIt("error","Failed to create admin user. Please try again.",e.toastOpt)})},setAdministrator:function(){var e=this.constructPayload("set_administrator");this.submitForm(e,this.updateExistUrl,"PUT")},successHandler:function(){toastIt("success","".concat(this.toastMsg," has been ").concat("add"===this.formType?"added":"updated","."),this.toastOpt),document.getElementById("userFormId").reset(),this.userData["First Name"]="",this.userData["Last Name"]="",this.userData["Company"]="",this.userData["Email"]="",this.password="","my-profile"===this.formType?document.querySelector("ins-sidebar-item").routePageHandler():!this.addMore&&router.push("/admin-users"),this.addMore=!1,this.bindingValues=!1},errorHandler:function(){var e=Object(de["a"])(regeneratorRuntime.mark(function e(t){var a,s,i,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a="",s=this,!t.responseJSON.errors){e.next=13;break}if(!("undefined"!==t.responseJSON.errors.email&&null!==t.responseJSON.errors.email&&"email"in t.responseJSON.errors)){e.next=12;break}if("has already been taken"!=t.responseJSON.errors.email[0].toLowerCase()){e.next=11;break}return e.next=7,s.checkIfAdministrator();case 7:i=e.sent,i?(toastIt("error","User is already an administrator",this.toastOpt),this.$router.push("/admin-users")):swal({title:"",html:'\n                      <ins-loader\n                        state-icon="warning"\n                        icon-color="warning"\n                        state-message="Email already exists, do you want to set them as an Administrator? This will overwrite their details except for the password.">\n                      </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Yes"}).then(function(e){e.value?o.setAdministrator():e.dismiss&&(o.bindingValues=!1)}),e.next=12;break;case 11:a+=t.responseJSON.errors.email?"- Email "+t.responseJSON.errors.email[0]+"<br />":"";case 12:"undefined"!==t.responseJSON.errors.password&&null!==t.responseJSON.errors.password&&"password"in t.responseJSON.errors&&(a+=t.responseJSON.errors.password?"- Password "+t.responseJSON.errors.password[0]:"");case 13:toastIt("error",a,this.toastOpt);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),enableSubmitButtons:function(){},disableSubmitButtons:function(){},setPhoneValue:function(){var e=this;setTimeout(function(){$(".phone").intlTelInput("setNumber","+"+e.userData["Mobile Phone Country Code"]),e.areaCodeValue=e.userData["Mobile Phone Area Code"],e.phoneNumValue=e.userData["Mobile Phone Number"]},300)},setFormSettings:function(){var e=this;if("add"===this.formType)this.buttonLabel="Create",this.formMethod="POST",this.formURL="/api/users",this.formName="admin_sign_up",this.userData={},this.$refs.userEmailField.disabled=!1;else if("view"===this.formType){this.buttonLabel="Update",this.userData=this.$store.state.AdminStore.userData,this.formMethod,this.formURL,this.formName="";var t=document.getElementById("userFormId");t.elements;this.setPhoneValue()}else"edit"===this.formType?(this.buttonLabel="Update",this.userData=e.$store.state.AdminStore.userData,this.formMethod="PUT",this.formURL="".concat(this.location,"/api/users/").concat(this.userData.id),this.formName="admin_update_profile",this.setPhoneValue()):"remove"===this.formType?this.userData=this.$store.state.AdminStore.userData:"my-profile"===this.formType||"change-password"===this.formType?(this.getProfileData(),this.buttonLabel="Update Details",this.formMethod="PUT",this.formName="admin_update_profile",this.setPhoneValue()):this.$router.push("/overview")},getProfileData:function(){var e=this,t=this;this.$http.get(this.sourceProfile).then(function(a){if(a){var s,i=a.data.current_user,o={};if(null===i.contact_number)s="";else{var r=null!==i.contact_number.mobile_phone_country_code?"+"+i.contact_number.mobile_phone_country_code:"",n=null!==i.contact_number.mobile_phone_area_code?i.contact_number.mobile_phone_area_code:"",l=null!==i.contact_number.mobile_phone_number?i.contact_number.mobile_phone_number:"";s="".concat(r," ").concat(n," ").concat(l)}i&&(o={id:i.id,"First Name":i.first_name,"Last Name":i.last_name,Name:i.first_name+" "+i.last_name,Email:i.email,Role:"Administrator",Company:null===i.administrator.company_name?"":i.administrator.company_name,"Mobile Phone":s,"Mobile Phone Country Code":null===i.contact_number?"":i.contact_number.mobile_phone_country_code,"Mobile Phone Area Code":null===i.contact_number?"":i.contact_number.mobile_phone_area_code,"Mobile Phone Number":null===i.contact_number?"":i.contact_number.mobile_phone_number,"Last Activity":D()(i.updated_at).calendar(null,{sameElse:"Do MMM YYYY"})},t.userData=o,t.formURL="".concat(t.location,"/api/users/").concat(t.userData.id),t.setPhoneValue())}else e.$router.push("/overview")})},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t?"add"===this.formType?t.updateRouteLabel("Add New Admin Users"):"view"===this.formType?t.updateRouteLabel("Admin Details"):"edit"===this.formType&&t.updateRouteLabel("Update Admin User"):setTimeout(function(){e.setInsRendererLabel()},300)}},mounted:function(){var e=this;this.setInsRendererLabel(),setTimeout(function(){e.$store.state.AdminStore.userData["Mobile Phone Country Code"]=""===e.$store.state.AdminStore.userData["Mobile Phone Country Code"]?"61":e.$store.state.AdminStore.userData["Mobile Phone Country Code"],e.setFormSettings()},300),"localhost"!==window.location.hostname?this.authToken=JSON.parse(document.getElementById("formConfig").innerHTML):(this.authToken="+Qj2j1eQpuy1fFxW6atnOluUyHLbL5cwDYL14rhASm13C+nkIPB6A5Ajxf/Cf1xFveFpEKMUd812HpUhyiBShQ==",this.location="https://insites-poc.staging-sydney.near-me.com")}}),he=me,pe=(a("8d19"),Object(A["a"])(he,ce,ue,!1,null,null,null));pe.options.__file="ViewUserDetails.vue";var fe=pe.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ViewUserDetails")},ye=[],ge={name:"MyProfile",components:{ViewUserDetails:fe},data:function(){return{}},methods:{},created:function(){this.$store.commit("pushFormType","my-profile")}},_e=ge,ve=(a("1d75"),Object(A["a"])(_e,be,ye,!1,null,null,null));ve.options.__file="MyProfile.vue";var Ce=ve.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"tableButtons"}},[a("ins-button",{attrs:{field:"addNewCompany",id:"addNewCompany",label:"ADD NEW COMPANY",color:"blue",solid:"true",size:"medium",disabled:e.loadingPage},on:{onClickInsButton:function(t){e.addNewCompany()}}}),a("ins-button",{attrs:{field:"addNewContact",id:"addNewContact",label:"ADD NEW CONTACT",color:"blue",solid:"true",size:"medium",disabled:e.loadingPage},on:{onClickInsButton:function(t){e.addNewContact()}}})],1),a("ins-base-table",{attrs:{id:"insBaseTable","searchbar-placeholder":"Search by Company, Contact or Email..."},on:{onPaginationChange:e.tablePaginationHandler,onTableSearch:e.tableSearchHandler,onTableSort:e.tableSortHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler}})],1)},ke=[],we=a("a322"),Te=a("2f62"),Se={name:"ListCRM",components:{},data:function(){return{loadingPage:!1,headers:void 0,crmListData:[],companyListData:[],crmBuilt:!1,companyBuilt:!1,sourceCompany:"/api/get-all-company-list-data.json",sourceCRM:"/api/get-all-customers-list-data.json",sourceCompanyDetails:"/api/get-company-details-data.json?id=",sourceCRMDetails:"/api/get-all-company-contact-list-data.json?id=",searchSource:"/api/search-company-data.json",userData:{},companyData:{},totalCount:0,pageNumber:1,pageSize:10,searchKeyword:"",sortedKeyword:"",sortedBy:"asc",rawData:[],filteredData:[],displayedData:[],formModel:{form_configuration_name:"crm_delete_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{is_enabled:"false"}}}}},continueDeletion:!1,errorMessage:"Failed to load Data. Please try again."}},methods:{addNewCompany:function(){this.$store.commit("pushUserProfile","company"),this.$store.commit("pushFormType","add"),this.$store.commit("pushFormName","add_new_company"),this.$router.push("/manage-company")},addNewContact:function(){this.$store.commit("pushUserProfile","customer"),this.$store.commit("pushFormType","add"),this.$store.commit("pushFormName","add_new_customer"),this.$router.push("/manage-crm")},tablePaginationHandler:function(e){var t=parseInt(e.detail.pageSize);this.pageNumber=e.detail.pageNumber,this.pageSize!==t&&(this.pageNumber=1),this.pageSize=t,this.processTableData()},dynamicKeySort:function(e,t){var a="asc"===t?1:-1;return function(t,s){var i=t[e]<s[e]?-1:t[e]>s[e]?1:0;return i*a}},tableSearchHandler:function(e){var t=this;if(13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword){if(this.insBaseTable.loadingScreen=!0,this.searchKeyword=e.detail.value,!this.searchKeyword)return void this.processTableData();this.filteredData=[];var a=this;this.rawData.forEach(function(e){Object.keys(e).forEach(function(s){if("Company"===s||"Contact"===s||"Email"===s){var i=e[s];if(console.log("search: ",t.searchKeyword.toLowerCase()),i.toLowerCase().includes(a.searchKeyword.toLowerCase())){var o=t.filteredData.find(function(t){return t.company_id===e.company_id||t.contact_id===e.contact_id});o||t.filteredData.push(e)}}})}),this.sortedKeyword&&this.filteredData.length>0&&this.filteredData.sort(this.dynamicKeySort(this.sortedKeyword)),this.insBaseTable.pageNumber=1,this.processTableData(),this.filteredData.length||(this.insBaseTable.loadingScreen=!0,this.insBaseTable.loaderTitle="",this.insBaseTable.loaderMessage='No result found for "'+this.searchKeyword+'"',this.insBaseTable.loaderIcon="")}},tableSortHandler:function(e){this.sortedKeyword=e.detail.keyword,this.sortedBy=e.detail.order,this.searchKeyword?this.filteredData.sort(this.dynamicKeySort(this.sortedKeyword,this.sortedBy)):this.rawData.sort(this.dynamicKeySort(this.sortedKeyword,this.sortedBy)),this.processTableData()},tableBulkActionHandler:function(e){"Archive"===e.detail.action&&this.archiveSelection(e.detail.selections)},tableRowActionHandler:function(e){"Archive"===e.detail.action?this.archiveItem(e.detail):"Edit"===e.detail.action?("Company"===e.detail.header?this.$store.commit("pushUserData",e.detail.data):"Contact"===e.detail.header&&(e.detail.data.Company?this.$store.commit("pushUserData",e.detail.data.contact_data):this.$store.commit("pushUserData",e.detail.data)),this.$store.commit("pushFormType","edit"),this.viewItem(e.detail.header)):"View"===e.detail.action&&this.viewHandler(e.detail)},viewItem:function(e){"Company"===e?this.$router.push("/manage-company"):"Contact"===e?this.$router.push("/manage-crm"):this.$router.push("/customers")},viewHandler:function(e){switch(e.header){case"Company":this.$store.commit("setCompanyData",e.data),this.$router.push("/view-company");break;case"Contact":e.data.Company?this.$store.commit("setContactData",event.detail.data.contact_data):this.$store.commit("setContactData",event.detail.data),this.$router.push("/view-contact")}},archiveItem:function(e){var t=this,a="Are you sure you want to archive this contact?";"Company"==e.header&&(a="Are you sure you want to archive this company?  By doing so, it will also archive all contacts listed in it."),swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(a,'">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(a){a.value&&(t.continueDeletion=!0,"Company"==e.header?t.deleteCompanyAndContacts(e.data.company_id):t.deleteContact(e.data.contact_id,!0))})},archiveSelection:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to archive these items?">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(a){if(a.value){var s=0;t.continueDeletion=!0,e.forEach(function(){var a=Object(de["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(!t.continueDeletion){a.next=10;break}if(""===i.company_id&&null===i.company_id){a.next=6;break}return a.next=4,t.deleteCompanyAndContacts(i.company_id);case 4:a.next=8;break;case 6:return a.next=8,t.deleteContact(i.contact_id,!1);case 8:s++,e.length===s&&(t.continueDeletion=!1,toastIt("success","Items have been archived.",t.ops),t.fetchDataFromSrc());case 10:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())}})},deleteContactList:function(e){var t=this;return e.forEach(function(){var e=Object(de["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.deleteContact(a.id,!1);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),!0},deleteCompanyAndContacts:function(){var e=Object(de["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a="".concat(this.sourceCRMDetails).concat(t,"&sortBy=updated_at&orderBy=desc"),s=!1,!this.continueDeletion){e.next=8;break}return e.next=5,this.getAdditionalData(a);case 5:i=e.sent,s=!i||i===[]||this.deleteContactList(i),s&&(this.continueDeletion=!1,this.deleteCompany(t,!1));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteCompany:function(e,t){var a=this,s="/api/customizations/".concat(e),i={form_configuration_name:"crm_delete_company",parent_resource_id:"company",form:{properties:{is_enabled:"false"}}},o=JSON.stringify(i);this.$http.put(s,o,{headers:this.headers}).then(function(s){if(a.$store.commit("removeCompanyOption",e),!a.continueDeletion)return t&&toastIt("success","Company and its contacts have been archived.",a.ops),a.fetchDataFromSrc(),!0}).catch(function(e){a.continueDeletion=!1,a.fetchDataFromSrc(),toastIt("error","Failed to archive company. Please try again.",a.ops)})},deleteContact:function(e,t){var a=this,s="/api/users/".concat(e),i=JSON.stringify(this.formModel);this.$http.put(s,i,{headers:this.headers}).then(function(e){t&&(toastIt("success","Contact has been archived.",a.ops),a.fetchDataFromSrc())}).catch(function(e){a.continueDeletion=!1,a.fetchDataFromSrc(),toastIt("error","Failed to archive user. Please try again.",a.ops)}),this.continueDeletion||this.fetchDataFromSrc()},processTableData:function(){var e=this,t=this.pageNumber*this.pageSize,a=t-this.pageSize;this.displayedData=[],this.searchKeyword?this.filteredData.forEach(function(s,i){i>=a&&i<=t?e.displayedData.push(s):e.filteredData.length<e.pageSize&&e.displayedData.push(s)}):this.rawData.forEach(function(s,i){i>=a&&i<t&&e.displayedData.push(s)}),this.insBaseTable.totalCount=this.rawData.length,this.insBaseTable.tableData=this.displayedData,this.insBaseTable.loadingScreen=!1},searchPrimaryContact:function(e){var t=e.find(function(e){return"Primary"===e.customer_details.contact_type});return t||(t=e.find(function(e){return"Secondary"===e.customer_details.contact_type})),t||e[0]},removeTableDataDuplicate:function(){var e={};console.log("REMOVE DUPLICATES");for(var t=0;t<this.rawData.length;t++)if("undefined"!==typeof this.rawData[t]["company_id"]&&""!==this.rawData[t]["company_id"]&&null!==this.rawData[t]["company_id"])e[this.rawData[t]["company_id"]]=this.rawData[t],console.log(" has company ",e);else if(Object(p["isEmpty"])(e))e[[t]]=this.rawData[t];else for(var a in e)console.log(e[a].id," ",this.rawData[t].id," has comp ",e[this.rawData[t]["company_id"]]),e[a].id!==this.rawData[t].id&&e[this.rawData[t]["company_id"]]!==this.rawData[t].id&&(e[[t]]=this.rawData[t]);var s=[];for(var i in e)s.push(e[i]);this.insBaseTable.totalCount=s.length,this.rawData=s,this.processTableData()},renderTable:function(){if(this.crmBuilt&&this.companyBuilt)if(this.crmListData.length||this.companyListData.length)this.removeTableDataDuplicate();else{var e="No customers yet.";this.searchKeyword&&(e='No result for "'.concat(this.searchKeyword,'"')),this.loaderStateHandler("",e,"no data"),this.loadingPage=!1}},fetchCRMData:function(){var e=this.constructURL("".concat(this.sourceCRM,"?size=10000&page=1"));this.$http.get(e).then(this.crmResponseHandler).catch(this.errorHandler)},crmResponseHandler:function(e){e.data.items.results.length?(this.crmListData=e.data.items.results,this.buildCRMTableData()):(this.crmBuilt=!0,this.fetchCompanyData())},buildCRMTableData:function(){var e=this,t=0;this.crmListData.forEach(function(){var a=Object(de["a"])(regeneratorRuntime.mark(function a(s){var i,o,r,n,l,c;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(o=s.customer_details.company_id,r=s.updated_at,null===o||""===o){a.next=8;break}return n="".concat(e.sourceCompanyDetails).concat(o),a.next=6,e.getAdditionalData(n);case 6:i=a.sent,i&&("true"===i.is_enabled||i.is_enabled)&&(i=i[0],r=i.updated_at);case 8:l=e.constructDateTime(r),c=e.constructCRMTableData(s,i,l),e.rawData.push(c),t++,t===e.crmListData.length&&(e.crmBuilt=!0,e.fetchCompanyData());case 13:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())},getAdditionalData:function(e){return this.$http.get(e).then(function(e){return!!e.data.items&&(!!e.data.items.results.length&&e.data.items.results)}).catch(this.errorHandler)},fetchCompanyData:function(){var e=this.constructURL("".concat(this.sourceCompany,"?size=10000&page=1"));this.$http.get(e).then(this.companyResponseHandler).catch(this.errorHandler)},companyResponseHandler:function(e){e.data.items.results.length?(this.companyListData=e.data.items.results,this.$store.commit("setCompanyOptions",this.companyListData),this.loadingPage=!1,this.buildCompanyTableData()):(this.companyBuilt=!0,this.renderTable())},buildCompanyTableData:function(){var e=this,t=0;this.companyListData.forEach(function(){var a=Object(de["a"])(regeneratorRuntime.mark(function a(s){var i,o,r,n,l;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return o=s.updated_at,r="".concat(e.sourceCRMDetails).concat(s.id,"&sortBy=updated_at&orderBy=desc"),a.next=4,e.getAdditionalData(r);case 4:n=a.sent,n&&(i=e.searchPrimaryContact(n),(Object(p["isEmpty"])(i)||null===i)&&(o=i.updated_at)),o=e.constructDateTime(o),l=e.constructCompanyTableData(s,i,o),e.rawData.push(l),t++,t===e.companyListData.length&&(e.companyBuilt=!0,e.renderTable());case 11:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())},constructCompanyTableData:function(e,t,a){var s,i=(s={id:null===e.id?"":e.id,raw:e,contact_data:{},company_id:null===e.id?"":e.id,Company:null===e.company_name?"":e.company_name,"Profile Image":Object(p["isEmpty"])(e)||null===e.profile_image?"":e.profile_image.original,Company_Img:Object(p["isEmpty"])(e)||null===e.profile_image?"":e.profile_image.original,company_updated_at:null===e.updated_at?"":this.constructDateTime(e.updated_at),Phone:this.constructPhoneNumber("mobile",e),"Home Phone":this.constructPhoneNumber("home",e),"Work Phone":this.constructPhoneNumber("work",e),"Last Activity":a,contact_id:"","First Name":"","Last Name":"",Contact:"",Contact_Img:"","Contact Type":"",Email:""},Object(we["a"])(s,"Contact_Img",""),Object(we["a"])(s,"Company Mobile Phone Country Code",this.checkValue(e.mobile_phone_country_code)),Object(we["a"])(s,"Company Mobile Phone Area Code",this.checkValue(e.mobile_phone_area_code)),Object(we["a"])(s,"Company Mobile Phone Number",this.checkValue(e.mobile_phone_number)),Object(we["a"])(s,"Company Home Phone Country Code",this.checkValue(e.home_phone_country_number)),Object(we["a"])(s,"Company Home Phone Area Code",this.checkValue(e.home_phone_area_number)),Object(we["a"])(s,"Company Home Phone Number",this.checkValue(e.home_phone_number)),Object(we["a"])(s,"Company Work Phone Country Code",this.checkValue(e.work_phone_country_number)),Object(we["a"])(s,"Company Work Phone Area Code",this.checkValue(e.work_phone_area_number)),Object(we["a"])(s,"Company Work Phone Number",this.checkValue(e.work_phone_number)),Object(we["a"])(s,"Home Address",e.location_1.length>0&&"undefined"!==e.location_1[0].address?e.location_1[0].address:""),Object(we["a"])(s,"Home Street",e.location_1.length>0&&"undefined"!==e.location_1[0].street?e.location_1[0].street:""),Object(we["a"])(s,"Home City",e.location_1.length>0&&"undefined"!==e.location_1[0].city?e.location_1[0].city:""),Object(we["a"])(s,"Home State",e.location_1.length>0&&"undefined"!=e.location_1[0].state?e.location_1[0].state:""),Object(we["a"])(s,"Home Area Code",e.location_1.length>0&&"undefined"!=e.location_1[0].postcode?e.location_1[0].postcode:""),Object(we["a"])(s,"Home Country",e.location_1.length>0&&"undefined"!==e.location_1[0].country?e.location_1[0].country:""),Object(we["a"])(s,"Facebook",this.checkValue(e.facebook_link)),Object(we["a"])(s,"Instagram",this.checkValue(e.instagram_link)),Object(we["a"])(s,"Twitter",this.checkValue(e.twitter_link)),Object(we["a"])(s,"Google",this.checkValue(e.google_plus_link)),Object(we["a"])(s,"Linkedin",this.checkValue(e.linkedin_link)),Object(we["a"])(s,"Youtube",this.checkValue(e.youtube_link)),Object(we["a"])(s,"Notes",this.checkValue(e.notes)),Object(we["a"])(s,"Website",this.checkValue(e.website)),Object(we["a"])(s,"Industry Type",this.checkValue(e.industry_type)),Object(we["a"])(s,"Company Type",this.checkValue(e.company_type)),Object(we["a"])(s,"Assigned To",this.checkValue(e.assigned_to)),Object(we["a"])(s,"contact_updated_at",""),Object(we["a"])(s,"Industry Type",this.checkValue(e.industry_type)),Object(we["a"])(s,"Company Type",this.checkValue(e.company_type)),s);return t&&(i["contact_id"]=Object(p["isEmpty"])(t)||t?t.id:"",i["First Name"]=Object(p["isEmpty"])(t)||t?t.first_name:"",i["Last Name"]=Object(p["isEmpty"])(t)||t?t.last_name:"",i["Contact Type"]=Object(p["isEmpty"])(t)||t?t.customer_details.contact_type:"",i["Contact"]=(Object(p["isEmpty"])(t)||null===t?"":null!==t.first_name||""!==t.first_name?t.first_name:"")+(Object(p["isEmpty"])(t)||null===t?"":null!==t.last_name||""!==t.last_name?" "+t.last_name:""),i["Email"]=Object(p["isEmpty"])(t)||t?t.email:"",i["Mobile Phone"]=this.constructPhoneNumber("mobile",t.contact_number),i["Mobile Phone Country Code"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.mobile_phone_country_code),i["Mobile Phone Area Code"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.mobile_phone_area_code),i["Mobile Phone Number"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.mobile_phone_number),i["Home Phone"]=this.constructPhoneNumber("home",t.contact_number),i["Home Phone Country Code"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.home_phone_country_code),i["Home Phone Area Code"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.home_phone_area_code),i["Home Phone Number"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.home_phone_number),i["Work Phone"]=this.constructPhoneNumber("work",t.contact_number),i["Work Phone Country Code"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.work_phone_country_code),i["Work Phone Area Code"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.work_phone_area_code),i["Work Phone Number"]=Object(p["isEmpty"])(t.contact_number)?"":this.checkValue(t.contact_number.work_phone_number),i["contact_updated_at"]=Object(p["isEmpty"])(t)||t?"":this.constructDateTime(t.updated_at),i.contact_data=this.constructCRMTableData(t,e,this.constructDateTime(t.updated_at)),i["Contact_Img"]=Object(p["isEmpty"])(t.customer_details)?"":null===t.customer_details.profile_image?"":t.customer_details.profile_image.original),i},fetchDataFromSrc:function(){this.rawData=[],this.displayedData=[],this.loaderStateHandler("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),this.fetchCRMData()},errorHandler:function(e){console.error("Error: "+e),this.continueDeletion=!1,this.loaderStateHandler("",this.errorMessage,"error")},loaderStateHandler:function(e,t,a){this.insBaseTable.loadingScreen=!0,this.insBaseTable.loaderTitle=e,this.insBaseTable.loaderMessage=t,this.insBaseTable.loaderIcon=a},setupInsTable:function(){this.insBaseTable=document.getElementById("insBaseTable"),this.insBaseTable.rowActions=["View","Edit","Archive"],this.insBaseTable.bulkActions=["Archive"],this.insBaseTable.tableHeaders=[this.constructTableHeader("Company","string",!0,!0,!0),this.constructTableHeader("Contact","string",!0,!0,!0),this.constructTableHeader("Email","string",!0),this.constructTableHeader("Phone"),this.constructTableHeader("Last Activity","string",!0)]},constructTableHeader:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string",a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return{label:e,type:t,sortable:a,hasColumnAction:s,hasImage:i}},constructURL:function(e){var t=e;return t+="?sortBy=".concat(this.sortedKeyword),t+="&orderBy=".concat(this.sortedBy),t},constructDateTime:function(e){return e?D()(e).calendar(null,{sameElse:"Do MMM YYYY"}):""},constructPhoneNumber:function(e,t){var a="";return t&&(this.checkValue(t[e+"_phone_area_code"])||this.checkValue(t[e+"_phone_number"]))&&(a="".concat(this.checkValue(t[e+"_phone_country_code"],!0)),a+=" ".concat(this.checkValue(t[e+"_phone_area_code"])),a+=" ".concat(this.checkValue(t[e+"_phone_number"]))),a.trim()},checkValue:function(e,t){return e&&"undefined"!==e?"".concat(t?"+":"").concat(e):""},constructCRMTableData:function(e,t,a){return{id:null===e.id?"":e.id,raw:e,"Contact Type":e.customer_details.contact_type,company_id:Object(p["isEmpty"])(t)||null===t.id?"":t.id,Company:Object(p["isEmpty"])(t)||null===t.company_name?"":t.company_name,Company_Img:Object(p["isEmpty"])(t)||Object(p["isEmpty"])(t.profile_image)?"":t.profile_image.original,company_updated_at:Object(p["isEmpty"])(t)||null===t.updated_at?"":this.constructDateTime(t.updated_at),contact_id:e.id,"First Name":e.first_name,"Last Name":e.last_name,Contact:(null!==e.first_name&&""!==e.first_name?e.first_name:"")+(null!==e.last_name&&""!==e.last_name?" "+e.last_name:""),Email:e.email,Notes:this.checkValue(e.customer_details.notes),Contact_Img:null===e.customer_details.profile_image?"":this.checkValue(e.customer_details.profile_image.original),"Profile Image":Object(p["isEmpty"])(e)||null===e.customer_details.profile_image?"":e.customer_details.profile_image.original,Phone:Object(p["isEmpty"])(e.contact_number)?"":this.constructPhoneNumber("mobile",e.contact_number),"Mobile Phone Country Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.mobile_phone_country_code),"Mobile Phone Area Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.mobile_phone_area_code),"Mobile Phone Number":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.mobile_phone_number),"Home Phone":Object(p["isEmpty"])(e.contact_number)?"":this.constructPhoneNumber("home",e.contact_number),"Home Phone Country Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.home_phone_country_code),"Home Phone Area Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.home_phone_area_code),"Home Phone Number":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.home_phone_number),"Work Phone":Object(p["isEmpty"])(e.contact_number)?"":this.constructPhoneNumber("work",e.contact_number),"Work Phone Country Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.work_phone_country_code),"Work Phone Area Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.work_phone_area_code),"Work Phone Number":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.work_phone_number),"Home Address":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].address):"","Home Street":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].street):"","Home City":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].city):"","Home State":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].state):"","Home Area Code":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].postcode):"","Home Country":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].country):"",Facebook:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.facebook_link),Instagram:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.instagram_link),Twitter:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.twitter_link),Google:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.google_plus_link),Linkedin:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.linkedin_link),Youtube:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.youtube_link),contact_updated_at:this.constructDateTime(e.updated_at),"Last Activity":a}},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Customers"):setTimeout(function(){e.setInsRendererLabel()},300)}},mounted:function(){this.setInsRendererLabel(),this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.setupInsTable(),this.fetchDataFromSrc()}},Ae=Se,Fe=(a("f0bd"),Object(A["a"])(Ae,De,ke,!1,null,"28be6a21",null));Fe.options.__file="ListCRM.vue";var Ie=Fe.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"large-12 medium-12 small-12 cell"},[e.showForm?a("form",{attrs:{id:"crmForm",action:"#","data-abide":"","data-live-validate":"true",novalidate:"",onsubmit:"event.preventDefault()",enctype:"multipart/form-data"}},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x "},[a("div",{staticClass:"large-12 medium-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Profile Picture")]),a("InsImagePickerWrap",{attrs:{name:"userCustomerProfileImage",type:"picture","button-color":"blue"},on:{fileNameChanged:e.getFilename},model:{value:e.userData["Profile Image"],callback:function(t){e.$set(e.userData,"Profile Image",t)},expression:"userData['Profile Image']"}})],1)]),a("div",{staticClass:"grid-x grid-padding-x "},[a("div",{staticClass:"large-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Contact Details")])]),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("InsInputWrap",{staticClass:"large-6 medium-6 small-12 cell",attrs:{id:"userFirstNameField",name:"userFirstNameField",maxlength:"30",placeholder:"First Name",label:"First Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"First Name is required."},nativeOn:{keyup:function(t){return e.validateInput(t)}},model:{value:e.userData["First Name"],callback:function(t){e.$set(e.userData,"First Name",t)},expression:"userData['First Name']"}}),a("InsInputWrap",{staticClass:"large-6 medium-6 small-12 cell",attrs:{id:"userLastNameField",name:"userLastNameField",maxlength:"30",placeholder:"Last Name",label:"Last Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"Last Name is required."},nativeOn:{keyup:function(t){return e.validateInput(t)}},model:{value:e.userData["Last Name"],callback:function(t){e.$set(e.userData,"Last Name",t)},expression:"userData['Last Name']"}})],1),a("InsSelectWrap",{attrs:{id:"userAssignedToField",name:"form[properties_attributes][contact_type]",label:"Contact Type",placeholder:"- Select -",searchable:""},model:{value:e.userData["Contact Type"],callback:function(t){e.$set(e.userData,"Contact Type",t)},expression:"userData['Contact Type']"}},[a("ins-select-option",{attrs:{label:"Primary",value:"Primary"}}),a("ins-select-option",{attrs:{label:"Secondary",value:"Secondary"}}),e._l(e.contactTypes.results,function(e){return a("ins-select-option",{key:e.id,attrs:{label:e.value,value:e.id}})})],2)],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("ins-input-tel",{ref:"workPhone",attrs:{id:"workPhone",label:"Work Phone","area-code":"userDataWorkAreaCode","areacode-placeholder":"Area Code","phone-number":"userDataWorkPhoneNumber","phonenum-placeholder":"Phone Number","phonenum-value":e.workPhoneNumValue,"areacode-value":e.workAreaCodeValue,readonly:"view"===e.formType}}),a("ins-input-tel",{ref:"mobilePhone",attrs:{id:"mobilePhone",label:"Mobile Phone","area-code":"userDataMobileAreaCode","areacode-placeholder":"Area Code","phone-number":"userDataMobilePhoneNumber","phonenum-placeholder":"Phone Number","phonenum-value":e.mobilePhoneNumValue,"areacode-value":e.mobileAreaCodeValue,readonly:"view"===e.formType}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("ins-input-tel",{ref:"homePhone",attrs:{id:"homePhone",label:"Home Phone","area-code":"userDataHomeAreaCode","areacode-placeholder":"Area Code","phone-number":"userDataHomePhoneNumber","phonenum-placeholder":"Phone Number","phonenum-value":e.homePhoneNumValue,"areacode-value":e.homeAreaCodeValue,readonly:"view"===e.formType}}),a("InsInputWrap",{ref:"userEmailField",attrs:{id:"userEmailField",name:"userEmailField",maxlength:"30",placeholder:"Email Address",label:"Email Address*",field:"email",required:"",autocomplete:"off",errorMessage:e.emailErrorMessage},nativeOn:{keyup:function(t){return e.validateEmail(t)}},model:{value:e.userData["Email"],callback:function(t){e.$set(e.userData,"Email",t)},expression:"userData['Email']"}})],1)]),a("div",{staticClass:"grid-x grid-padding-x spacer-top-m"},[a("div",{staticClass:"large-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Address")])]),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{ref:"searchAddressField",attrs:{id:"searchAddress",name:"searchAddress",label:"Search Address",field:"text",placeholder:e.googleMapsApiKey.results.length?"Search Address":"No Google API Key",disabled:!e.googleMapsApiKey.results.length,autocomplete:"off"},model:{value:e.searchAddress,callback:function(t){e.searchAddress=t},expression:"searchAddress"}}),a("div",{staticClass:"grid-x grid-padding-x"},[a("InsInputWrap",{staticClass:"large-5 medium-5 small-5 cell",attrs:{id:"userHomeStreetField",name:"userHomeStreetField",maxlength:"50",placeholder:"Address 1",label:"Address 1",field:"text",autocomplete:"off"},model:{value:e.userData["Home Street"],callback:function(t){e.$set(e.userData,"Home Street",t)},expression:"userData['Home Street']"}}),a("InsInputWrap",{staticClass:"large-7 medium-7 small-7 cell",attrs:{id:"userHomeAddressField",name:"userHomeAddressField",maxlength:"50",placeholder:"Address 2",label:"Address 2",field:"text",autocomplete:"off"},model:{value:e.userData["Home Address"],callback:function(t){e.$set(e.userData,"Home Address",t)},expression:"userData['Home Address']"}})],1)],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userHomeCityField",name:"userHomeCityField",maxlength:"50",placeholder:"City",label:"City",field:"text",autocomplete:"off"},model:{value:e.userData["Home City"],callback:function(t){e.$set(e.userData,"Home City",t)},expression:"userData['Home City']"}}),a("InsInputWrap",{attrs:{id:"userHomeStateField",name:"userHomeStateField",maxlength:"50",placeholder:"State",label:"State",field:"text",autocomplete:"off"},model:{value:e.userData["Home State"],callback:function(t){e.$set(e.userData,"Home State",t)},expression:"userData['Home State']"}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{staticClass:"large-5 medium-5 small-5 cell",attrs:{id:"userHomeAreaCodeField",name:"userHomeAreaCodeField",maxlength:"50",placeholder:"Post Code",label:"Post Code",field:"text",autocomplete:"off"},model:{value:e.userData["Home Area Code"],callback:function(t){e.$set(e.userData,"Home Area Code",t)},expression:"userData['Home Area Code']"}}),a("InsInputWrap",{staticClass:"large-5 medium-5 small-5 cell",attrs:{id:"userHomeCountryField",name:"userHomeCountryField",maxlength:"50",placeholder:"Country",label:"Country",field:"text",autocomplete:"off"},model:{value:e.userData["Home Country"],callback:function(t){e.$set(e.userData,"Home Country",t)},expression:"userData['Home Country']"}})],1)]),a("div",{staticClass:"grid-x grid-padding-x spacer-top-m"},[a("div",{staticClass:"large-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Additional Info")])]),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userFacebookField",name:"userFacebookField",maxlength:"50",placeholder:"Facebook",label:"Facebook Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Facebook"],callback:function(t){e.$set(e.userData,"Facebook",t)},expression:"userData['Facebook']"}}),a("InsInputWrap",{attrs:{id:"userTwitterField",name:"userTwitterField",maxlength:"50",placeholder:"Twitter",label:"Twitter Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Twitter"],callback:function(t){e.$set(e.userData,"Twitter",t)},expression:"userData['Twitter']"}}),a("InsInputWrap",{attrs:{id:"userYoutubeField",name:"userYoutubeField",maxlength:"50",placeholder:"Youtube",label:"YouTube Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Youtube"],callback:function(t){e.$set(e.userData,"Youtube",t)},expression:"userData['Youtube']"}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userLinkedinField",name:"userLinkedinField",maxlength:"50",placeholder:"Linkedin",label:"Linkedin Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Linkedin"],callback:function(t){e.$set(e.userData,"Linkedin",t)},expression:"userData['Linkedin']"}}),a("InsInputWrap",{attrs:{id:"userInstagramField",name:"userInstagramField",maxlength:"50",placeholder:"Instagram",label:"Instagram Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Instagram"],callback:function(t){e.$set(e.userData,"Instagram",t)},expression:"userData['Instagram']"}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[e.mutatingCompanies?e._e():a("InsSelectWrap",{attrs:{id:"userAssignedToField",name:"form[properties_attributes][contact_type]",label:"Company",placeholder:"- Select -","dynamic-placeholder":"Add New Company",searchable:"","with-dynamic-option":""},on:{onSubmitOption:e.onSubmitOptionHandler},model:{value:e.userData["company_id"],callback:function(t){e.$set(e.userData,"company_id",t)},expression:"userData['company_id']"}},[e.companyOptions.length?e._e():a("ins-select-option",{attrs:{label:"No company yet.",value:"",disabled:""}}),e._l(e.companyOptions,function(e){return a("ins-select-option",{key:e.id,attrs:{label:e.label,value:e.id}})})],2),a("InsTextareaWrap",{attrs:{id:"userNoteField",name:"userNoteField",placeholder:"Notes",label:"Notes",autocomplete:"off",maxlength:"255"},model:{value:e.userData["Notes"],callback:function(t){e.$set(e.userData,"Notes",t)},expression:"userData['Notes']"}})],1)])]),a("div",{staticClass:"grid-x grid-padding-x grid-padding-y"},["edit"==e.formType?a("div",{staticClass:"cell large-4 medium-3 small-12"},[a("ins-button",{attrs:{label:"ARCHIVE CONTACT",color:"negative",type:"button"},on:{onClickInsButton:e.archiveContact}})],1):e._e(),a("div",{class:("edit"===e.formType?"large-8":"large-12")+" medium-9 small-12 cell text-right"},[a("ins-button",{attrs:{type:"button",label:"Cancel",outlined:"",disabled:e.submittingForm},on:{onClickInsButton:e.backToList}}),a("ins-button",{attrs:{type:"submit",solid:"",label:e.buttonLabel,disabled:e.submittingForm},on:{onClickInsButton:e.fetchContactList}}),"add"==e.formType?a("ins-button",{attrs:{type:"button",label:"Save and Create Another",solid:"",disabled:e.submittingForm},on:{onClickInsButton:e.saveAddMore}}):e._e()],1)])],1):e._e()])])])])},Pe=[],Me=(a("4917"),a("34ef"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ins-image-picker",{attrs:{"img-type":e.imgType,label:e.label,"button-color":e.buttonColor,value:e.value},on:{valueChange:e.onValueChange}})}),xe=[],je={name:"InsImagePickerWrap",props:{imgType:String,buttonColor:String,value:String,label:String},methods:{onValueChange:function(e){var t=this;t.$emit("input",e.detail.base64),t.$emit("fileNameChanged",e.detail.filename)}}},He=je,Ee=(a("c4f9"),Object(A["a"])(He,Me,xe,!1,null,"3e6c7ed7",null));Ee.options.__file="InsImagePickerWrap.vue";var Oe=Ee.exports,Le={name:"EditCRMDetails",components:{InsInputWrap:I,InsTextareaWrap:R,InsSelectWrap:H,InsImagePickerWrap:Oe},data:function(){return{submittingForm:!1,showForm:!1,userData:{},oldContactType:"",userProfile:this.$store.state.CrmStore.userProfile,formType:this.$store.state.CrmStore.formType,formMethod:"",formName:"",fromURL:"/api/users",searchAddress:"",searchAddressField:void 0,authToken:"",location:"",emailErrorMessage:"Invalid email address.",userCountryCode:"au",buttonLabel:"Add Contact",addMore:!1,toastMsg:"",toastOpt:{closeHtml:'<button><i class="icon-close-1"></i></button>',closeButton:!0,timeOut:0,extendedTimeOut:0},sourceProfile:"/api/get-current-user-data.json",workAreaCodeValue:"",workPhoneNumValue:"",mobileAreaCodeValue:"",mobilePhoneNumValue:"",homeAreaCodeValue:"",homePhoneNumValue:"",headers:{},formModel:{form_configuration_name:"crm_delete_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{is_enabled:"false"}}}}}}},computed:Object(Te["b"])({contactTypes:function(e){return e.SystemFieldsStore.contact_type},swalContactTypes:function(e){return e.SystemFieldsStore.swalContactTypes},companyOptions:function(e){return e.CrmStore.companyOptions},mutatingCompanies:function(e){return e.CrmStore.mutatingCompanies},googleMapsApiKey:function(e){return e.SystemFieldsStore.google_maps_api_key}}),methods:{onSubmitOptionHandler:function(e){var t={form_configuration_name:"add_new_company",parent_resource_id:"company",form:{properties:{company_name:e,is_enabled:"true"}}};this.addCompanyOption(t)},addCompanyOption:function(e){var t=this;this.submittingForm=!0;var a=JSON.stringify(e),s="/api/customizations";this.$http.post(s,a,{headers:this.headers}).then(function(a){var s=a.data.id.toString();t.$store.commit("pushCompanyOption",{id:s,label:e.form.properties.company_name}),t.userData["company_id"]=s,t.submittingForm=!1,toastIt("success","Successfully created company.",t.ops)}).catch(function(e){console.error("error",e),t.submittingForm=!1,toastIt("error","Failed to add company.",t.ops)})},getFilename:function(e){this.profilePictureName=e},base64ToBlob:function(e,t){t=t||"";for(var a=1024,s=window.atob(e),i=[],o=0,r=s.length;o<r;o+=a){for(var n=s.slice(o,o+a),l=new Array(n.length),c=0;c<n.length;c++)l[c]=n.charCodeAt(c);var u=new Uint8Array(l);i.push(u)}return new Blob(i,{type:t})},appendToFormData:function(e){var t=new FormData;return Object(p["each"])(e,function(e,a){t.append(a,e)}),t},backToList:function(){this.$router.go(-1)},saveAddMore:function(){this.addMore=!0,this.fetchContactList()},attachFile:function(){this.$refs.profilePic.click()},bindValues:function(){this.submittingForm=!0;var e=this.$refs.mobilePhone.getCountryData();e=e.dialCode;var t=this.$refs.homePhone.getCountryData();t=t.dialCode;var a=this.$refs.workPhone.getCountryData();a=a.dialCode;var s={authenticity_token:this.authToken,form_configuration_name:this.formName,parent_resource_id:this.parentResourceId,"form[email]":this.userData["Email"],"form[first_name]":this.userData["First Name"],"form[last_name]":this.userData["Last Name"],"form[name]":"".concat(this.userData["First Name"]," ").concat(this.userData["Last Name"]),"form[profiles_attributes][customer_attributes][properties_attributes][company_id]":this.userData["company_id"],"form[profiles_attributes][customer_attributes][properties_attributes][contact_type]":this.userData["Contact Type"],"form[profiles_attributes][customer_attributes][properties_attributes][notes]":this.userData["Notes"],"form[profiles_attributes][customer_attributes][properties_attributes][is_enabled]":"true","form[profiles_attributes][customer_attributes][custom_addresses_attributes][home_address_attributes][street]":this.userData["Home Street"],"form[profiles_attributes][customer_attributes][custom_addresses_attributes][home_address_attributes][address]":this.userData["Home Address"],"form[profiles_attributes][customer_attributes][custom_addresses_attributes][home_address_attributes][city]":this.userData["Home City"],"form[profiles_attributes][customer_attributes][custom_addresses_attributes][home_address_attributes][state]":this.userData["Home State"],"form[profiles_attributes][customer_attributes][custom_addresses_attributes][home_address_attributes][postcode]":this.userData["Home Area Code"],"form[profiles_attributes][customer_attributes][custom_addresses_attributes][home_address_attributes][country]":this.userData["Home Country"],"form[profiles_attributes][contact_number_attributes][properties_attributes][mobile_phone_country_code]":e,"form[profiles_attributes][contact_number_attributes][properties_attributes][mobile_phone_area_code]":document.getElementsByName("userDataMobileAreaCode")[0].value,"form[profiles_attributes][contact_number_attributes][properties_attributes][mobile_phone_number]":document.getElementsByName("userDataMobilePhoneNumber")[0].value,"form[profiles_attributes][contact_number_attributes][properties_attributes][home_phone_country_code]":t,"form[profiles_attributes][contact_number_attributes][properties_attributes][home_phone_area_code]":document.getElementsByName("userDataHomeAreaCode")[0].value,"form[profiles_attributes][contact_number_attributes][properties_attributes][home_phone_number]":document.getElementsByName("userDataHomePhoneNumber")[0].value,"form[profiles_attributes][contact_number_attributes][properties_attributes][work_phone_country_code]":a,"form[profiles_attributes][contact_number_attributes][properties_attributes][work_phone_area_code]":document.getElementsByName("userDataWorkAreaCode")[0].value,"form[profiles_attributes][contact_number_attributes][properties_attributes][work_phone_number]":document.getElementsByName("userDataWorkPhoneNumber")[0].value,"form[profiles_attributes][social_links_attributes][properties_attributes][facebook_link]":this.userData["Facebook"],"form[profiles_attributes][social_links_attributes][properties_attributes][twitter_link]":this.userData["Twitter"],"form[profiles_attributes][social_links_attributes][properties_attributes][youtube_link]":this.userData["Youtube"],"form[profiles_attributes][social_links_attributes][properties_attributes][linkedin_link]":this.userData["Linkedin"],"form[profiles_attributes][social_links_attributes][properties_attributes][google_plus_link]":"","form[profiles_attributes][social_links_attributes][properties_attributes][instagram_link]":this.userData["Instagram"]},i=this.appendToFormData(s),o=this.userData["Profile Image"]?this.userData["Profile Image"]:"";if(""!==o||void 0!==o){var r=o.replace(/^data:image\/(png|jpg|jpeg);base64,/,""),n=o.match(/^data:image\/(png|jpg|jpeg);base64,/);if(n){var l=this.base64ToBlob(r,"image/"+n[1]);i.append("form[profiles_attributes][customer_attributes][custom_images_attributes][profile_image_attributes][image]",l,this.profilePictureName)}}var c=document.getElementById("crmForm");"add"===this.formType&&(this.formURL="/api/users"),this.toastMsg="Customer",this.formValidate(c)?this.submitForm(i):(this.addMore=!1,this.submittingForm=!1)},submitForm:function(e){var t=this,a={type:this.formMethod,contentType:!1,processData:!1,data:e,success:function(e){t.successHandler()},error:function(e){t.errorHandler(e)}};$.ajax(this.formURL,a)},checkIfContact:function(){var e=this,t="".concat(this.location,"/admin/get-customer-profile-data.json?email=").concat(this.userData["Email"]);return this.$http.get(t).then(function(e){var t=e.data.items;if(t){var a=t.results[0].customer_details;return!!a&&(a.is_enabled&&"true"===a.is_enabled?"enabled":"disabled")}return!1}).catch(function(t){e.addMore=!1,e.submittingForm=!1,toastIt("error","Failed to add contact. Please try again.",e.ops)})},setAsContact:function(){var e=this,t="".concat(this.location,"/admin/set-as-contact?email=").concat(this.userData["Email"]);this.$http.get(t).then(function(t){e.successHandler()}).catch(function(t){e.addMore=!1,e.submittingForm=!1,toastIt("error","Failed to add contact. Please try again.",e.ops)})},successHandler:function(){toastIt("success","".concat(this.toastMsg," has been ").concat("add"===this.formType?"created":"updated","."),this.ops),document.getElementById("crmForm").reset(),this.userData["First Name"]="",this.userData["Last Name"]="",this.userData["Email"]="",!this.addMore&&this.$router.push("/customers"),this.addMore=!1,this.submittingForm=!1},errorHandler:function(){var e=Object(de["a"])(regeneratorRuntime.mark(function e(t){var a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a="",s=this,!t.responseJSON){e.next=18;break}if(!t.responseJSON.errors){e.next=16;break}if(!("undefined"!==t.responseJSON.errors.email&&null!==t.responseJSON.errors.email&&"email"in t.responseJSON.errors)){e.next=16;break}if("has already been taken"!=t.responseJSON.errors.email[0].toLowerCase()){e.next=12;break}return e.next=8,s.checkIfContact();case 8:i=e.sent,"enabled"===i?(this.addMore=!1,this.submittingForm=!1,toastIt("error","Contact already exist.",this.ops)):"disabled"===i?this.warnUser("This contact is archived, do you want to restore them?"):this.userExistsError("Email is already in use, Please use a different email."),e.next=16;break;case 12:a+=t.responseJSON.errors.email?"Email "+t.responseJSON.errors.email[0]+"<br />":"",this.addMore=!1,this.submittingForm=!1,toastIt("error",a,this.ops);case 16:e.next=21;break;case 18:this.addMore=!1,this.submittingForm=!1,toastIt("error","Failed to add contact.",this.ops);case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userExistsError:function(e){swal({title:"",html:'\n          <ins-loader\n              state-icon="error"\n              icon-color="error"\n              state-message="'.concat(e,'.">\n          </ins-loader>'),type:"",showCancelButton:!1})},warnUser:function(e){var t=this;swal({title:"",html:'\n          <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="'.concat(e,' This will use their existing data.">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Yes"}).then(function(e){e.value?t.setAsContact():e.dismiss&&(t.bindingValues=!1,t.addMore=!1,t.submittingForm=!1)})},setPhoneValue:function(){var e=this;setTimeout(function(){$("#homePhone .phone").intlTelInput("setNumber","+"+e.userData["Home Phone Country Code"]),e.homeAreaCodeValue=e.userData["Home Phone Area Code"],e.homePhoneNumValue=e.userData["Home Phone Number"],$("#mobilePhone .phone").intlTelInput("setNumber","+"+e.userData["Mobile Phone Country Code"]),e.mobileAreaCodeValue=e.userData["Mobile Phone Area Code"],e.mobilePhoneNumValue=e.userData["Mobile Phone Number"],$("#workPhone .phone").intlTelInput("setNumber","+"+e.userData["Work Phone Country Code"]),e.workAreaCodeValue=e.userData["Work Phone Area Code"],e.workPhoneNumValue=e.userData["Work Phone Number"]},300)},formValidate:function(e){var t=0,a=this;return Array.from($(".ins-form-field, .ins-select-value-input, .ins-textarea-field")).forEach(function(e){!0!==e.hasAttribute("required")&&"true"!=e.getAttribute("required")||(t+=a.validateInput(e)),"email"===e.getAttribute("type")&&(t+=a.validateEmail(e))}),!(t>0)},validateInput:function(e){return e=e.target?e.target:e,""===e.value.trim()||null===e.value?(this.invalidFieldNotif(e),1):(this.validFieldNotif(e),0)},blurValidateInput:function(e){return""===e.value.trim()||null===e.value?(this.invalidFieldNotif(e),1):(this.validFieldNotif(e),0)},invalidFieldNotif:function(e){e.closest("ins-input").setAttribute("has-error",!0)},validFieldNotif:function(e){e.closest("ins-input").removeAttribute("has-error")},validateEmail:function(e){e=e.target?e.target:e;var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(""!==e.value)return 1==t.test(String(e.value).toLowerCase())?(this.validFieldNotif(e),0):(this.emailErrorMessage="Invalid email address.",this.invalidFieldNotif(e),1);this.emailErrorMessage="Email address is required."},initMap:function(){var e=this;setTimeout(function(){e.googleMapsApiKey.results.length&&(e.searchAddressField=new google.maps.places.Autocomplete(e.$refs.searchAddressField.$el.querySelector("input")),e.searchAddressField.addListener("place_changed",e.fillAddress))},300)},fillAddress:function(){var e=this,t=this.searchAddressField.getPlace();this.searchAddress=t.formatted_address,this.userData["Home Street"]="",this.userData["Home Address"]="",this.userData["Home City"]="",this.userData["Home State"]="",this.userData["Home Country"]="",this.userData["Home Area Code"]="",t.address_components.forEach(function(t){var a=t.types[0];switch(a){case"street_number":e.userData["Home Address"]=t["short_name"]+" ";break;case"route":e.userData["Home Address"]+=t["long_name"];break;case"locality":e.userData["Home City"]=t["long_name"];break;case"colloquial_area":e.userData["Home City"]=t["long_name"];break;case"administrative_area_level_1":e.userData["Home State"]=t["short_name"];break;case"country":e.userData["Home Country"]=t["long_name"];break;case"postal_code":e.userData["Home Area Code"]=t["short_name"];break}})},setFormSettings:function(){var e=this;if("add"===this.formType)this.buttonLabel="Create",this.formMethod="POST",this.formURL="/api/users",this.formName="add_new_customer",this.userData={},this.$store.state.CrmStore.addFromCompany&&(this.userData.company_id=this.$store.state.CrmStore.addFromCompany);else if("view"===this.formType){this.buttonLabel="Update",this.userData=this.$store.state.CrmStore.userData,this.formMethod,this.formURL,this.formName="";for(var t=document.getElementById("crmForm"),a=t.elements,s=0,i=a.length;s<i;++s)a[s].readOnly=!0,a[s].disabled=!0;this.setPhoneValue()}else"edit"===this.formType?(this.buttonLabel="Update",this.userData=e.$store.state.CrmStore.userData,this.formMethod="PUT",this.formURL="".concat(this.location,"/api/users/").concat(this.userData.id),this.formName="crm_update_customer",this.setPhoneValue()):"remove"===this.formType?this.userData=this.$store.state.CrmStore.userData:this.$router.push("/customers");this.showForm=!0,this.initMap(),this.oldContactType=this.userData["Contact Type"]},archiveContact:function(){var e=this;swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="Are you sure you want to archive these items?">\n          </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(t){t.value&&e.deleteContact()})},deleteContact:function(){var e=this;this.submittingForm=!0;var t="/api/users/".concat(this.userData.id),a=JSON.stringify(this.formModel);this.$http.put(t,a,{headers:this.headers}).then(function(t){toastIt("success","Contact has been archived.",e.ops),e.$router.push("/customers")}).catch(function(t){e.submittingForm=!1,toastIt("error","Failed to archive user. Please try again.",e.ops)})},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t?"add"===this.formType?t.updateRouteLabel("Add Contact"):"edit"===this.formType&&t.updateRouteLabel("Edit Contact"):setTimeout(function(){e.setInsRendererLabel()},300)},fetchContactList:function(){if(this.submittingForm=!0,this.userData["company_id"]&&"Primary"===this.userData["Contact Type"]){var e="/api/get-all-company-contact-list-data.json?id=".concat(this.userData["company_id"]);this.$http.get(e).then(this.responseHandler).catch(this.errorHandlerCompany)}else this.bindValues()},responseHandler:function(e){var t=e.data.items.results;t.length?this.checkPrimaryContact(t):this.bindValues()},errorHandlerCompany:function(e){console.error("error",e),this.addMore=!1,this.submittingForm=!1,toastIt("error","Failed to validate company for Primary Contact",this.ops)},checkPrimaryContact:function(e){console.log("old: ",this.oldContactType," ",this.userData["Contact Type"]);var t=e.find(function(e){return"Primary"===e.customer_details.contact_type});t?this.oldContactType===this.userData["Contact Type"]?this.bindValues():this.primaryContactHandler(t):this.bindValues()},primaryContactHandler:function(e){var t=this,a="".concat(e.first_name," ").concat(e.last_name),s=this.getCompanyName(),i="<strong>".concat(a,"</strong> is set as Primary Contact for <strong>").concat(s,"</strong>. Do you want to change this?");swal({title:"",html:i,type:"warning",showCancelButton:!0}).then(function(s){s.value?t.selectPrimaryType(a,e):(t.addMore=!1,t.submittingForm=!1)})},selectPrimaryType:function(e,t){var a=this,s="Please select a contact type for <strong>".concat(e,"</strong>");swal({title:"",html:s,input:"select",inputOptions:this.swalContactTypes,inputPlaceholder:"Please select contact type",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Update"}).then(function(e){e.value?a.updatePrimaryContact(t,e.value):(a.addMore=!1,a.submittingForm=!1)})},updatePrimaryContact:function(e,t){var a=this,s="".concat(this.location,"/api/users/").concat(e.id),i={form_configuration_name:"crm_update_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{contact_type:t}}}}},o=JSON.stringify(i);this.$http.put(s,o,{headers:this.headers}).then(function(e){toastIt("success","Successfully updated current primary contact.",a.ops),a.bindValues()}).catch(function(e){console.error("error",e),a.addMore=!1,a.submittingForm=!1,toastIt("error","Failed to update current primary contact.",a.ops)})},getCompanyName:function(){var e=this,t=this.companyOptions.find(function(t){return t.id===e.userData["company_id"]});return t.label}},mounted:function(){var e=this;this.setInsRendererLabel(),this.headers=JSON.parse(JSON.stringify(this.apiHeader)),setTimeout(function(){e.$store.state.CrmStore.userData["Home Phone Country Code"]=""===e.$store.state.CrmStore.userData["Home Phone Country Code"]?"61":e.$store.state.CrmStore.userData["Home Phone Country Code"],e.$store.state.CrmStore.userData["Mobile Phone Country Code"]=""===e.$store.state.CrmStore.userData["Mobile Phone Country Code"]?"61":e.$store.state.CrmStore.userData["Mobile Phone Country Code"],e.$store.state.CrmStore.userData["Work Phone Country Code"]=""===e.$store.state.CrmStore.userData["Work Phone Country Code"]?"61":e.$store.state.CrmStore.userData["Work Phone Country Code"],e.setFormSettings()},500),"localhost"!==window.location.hostname?this.authToken=JSON.parse(document.getElementById("formConfig").innerHTML):(this.authToken="+Qj2j1eQpuy1fFxW6atnOluUyHLbL5cwDYL14rhASm13C+nkIPB6A5Ajxf/Cf1xFveFpEKMUd812HpUhyiBShQ==",this.location="https://insites-poc.staging-sydney.near-me.com")},beforeDestroy:function(){this.$store.commit("setAddFromCompany",!1)}},$e=Le,Be=(a("5988"),Object(A["a"])($e,Ne,Pe,!1,null,"55750d05",null));Be.options.__file="EditCRMDetails.vue";var Ve=Be.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-12 medium-12 small-12"},[e.showForm?a("form",{attrs:{id:"crmForm",action:"#","data-abide":"","data-live-validate":"true",novalidate:"",onsubmit:"event.preventDefault()",enctype:"multipart/form-data"}},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x "},[a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Profile Picture")]),a("InsImagePickerWrap",{attrs:{name:"form[custom_images_attributes][profile_images_attributes][image]",type:"picture","button-color":"blue",label:"UPLOAD LOGO"},on:{fileNameChanged:e.getFilename},model:{value:e.userData["Profile Image"],callback:function(t){e.$set(e.userData,"Profile Image",t)},expression:"userData['Profile Image']"}})],1)]),a("div",{staticClass:"grid-x grid-padding-x "},[a("div",{staticClass:"large-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Contact Details")])]),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userNameField",name:"form[properties_attributes][company_name]",placeholder:"Company Name",label:"Company Name*",field:"text",autocomplete:"off",required:"true",errorMessage:"Company Name is required."},nativeOn:{keyup:function(t){return e.validateInput(t)}},model:{value:e.userData["Company"],callback:function(t){e.$set(e.userData,"Company",t)},expression:"userData['Company']"}}),a("InsSelectWrap",{attrs:{id:"userAssignedToField",name:"form[properties_attributes][company_type]",label:"Company Type",placeholder:"- Select -",searchable:""},model:{value:e.userData["Company Type"],callback:function(t){e.$set(e.userData,"Company Type",t)},expression:"userData['Company Type']"}},[e.companyTypes.results.length?e._e():a("ins-select-option",{attrs:{label:"No company types yet.",value:"",disabled:""}}),e._l(e.companyTypes.results,function(e){return a("ins-select-option",{key:e.id,attrs:{label:e.value,value:e.id}})})],2)],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[e.loadingCRMData?e._e():a("InsSelectWrap",{attrs:{id:"userAssignedToField",name:"form[properties_attributes][assigned_to]",label:"Assigned To",placeholder:"- Select -",searchable:""},model:{value:e.userData["Assigned To"],callback:function(t){e.$set(e.userData,"Assigned To",t)},expression:"userData['Assigned To']"}},[e.administratorList.results.length?e._e():a("ins-select-option",{attrs:{label:"No administrators yet.",value:"",disabled:""}}),e._l(e.administratorList.results,function(e){return a("ins-select-option",{key:e.id,attrs:{label:e.first_name+" "+e.last_name,value:e.id}})})],2),a("InsSelectWrap",{attrs:{id:"userAssignedToField",name:"form[properties_attributes][industry_type]",label:"Industry Type",placeholder:"- Select -",searchable:""},model:{value:e.userData["Industry Type"],callback:function(t){e.$set(e.userData,"Industry Type",t)},expression:"userData['Industry Type']"}},[e.industryTypes.results.length?e._e():a("ins-select-option",{attrs:{label:"No industry types yet.",value:"",disabled:""}}),e._l(e.industryTypes.results,function(e){return a("ins-select-option",{key:e.id,attrs:{label:e.value,value:e.id}})})],2)],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{ref:"userWebsite",attrs:{id:"userWebsite",name:"form[properties_attributes][website]",placeholder:"Website",label:"Website",field:"text",autocomplete:"off"},model:{value:e.userData["Website"],callback:function(t){e.$set(e.userData,"Website",t)},expression:"userData['Website']"}}),a("ins-input-tel",{ref:"mobilePhone",attrs:{id:"mobilePhone",label:"Phone","area-code":"userDataMobileAreaCode","areacode-placeholder":"Area Code","phone-number":"userDataMobilePhoneNumber","phonenum-placeholder":"Phone Number","phonenum-value":e.mobilePhoneNumValue,"areacode-value":e.mobileAreaCodeValue,readonly:"view"===e.formType}})],1)]),a("div",{staticClass:"grid-x grid-padding-x spacer-top-m"},[a("div",{staticClass:"large-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Address")])]),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{ref:"searchAddressField",attrs:{id:"searchAddress",name:"searchAddress",label:"Search Address",field:"text",placeholder:e.googleMapsApiKey.results.length?"Search Address":"No Google API Key",disabled:!e.googleMapsApiKey.results.length,autocomplete:"off"},model:{value:e.searchAddress,callback:function(t){e.searchAddress=t},expression:"searchAddress"}}),a("div",{staticClass:"grid-x grid-padding-x"},[a("InsInputWrap",{staticClass:"large-5 medium-5 small-5 cell",attrs:{id:"userHomeStreetField",name:"form[custom_addresses_attributes][home_address_attributes][street]",placeholder:"Address 1",label:"Address 1",field:"text",autocomplete:"off"},model:{value:e.userData["Home Street"],callback:function(t){e.$set(e.userData,"Home Street",t)},expression:"userData['Home Street']"}}),a("InsInputWrap",{staticClass:"large-7 medium-7 small-7 cell",attrs:{id:"userHomeAddressField",name:"form[custom_addresses_attributes][home_address_attributes][address]",placeholder:"Address 2",label:"Address 2",field:"text",autocomplete:"off"},model:{value:e.userData["Home Address"],callback:function(t){e.$set(e.userData,"Home Address",t)},expression:"userData['Home Address']"}})],1)],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userHomeCityField",name:"form[custom_addresses_attributes][home_address_attributes][city]",placeholder:"City",label:"City",field:"text",autocomplete:"off"},model:{value:e.userData["Home City"],callback:function(t){e.$set(e.userData,"Home City",t)},expression:"userData['Home City']"}}),a("InsInputWrap",{attrs:{id:"userHomeStateField",name:"form[custom_addresses_attributes][home_address_attributes][state]",placeholder:"State",label:"State",field:"text",autocomplete:"off"},model:{value:e.userData["Home State"],callback:function(t){e.$set(e.userData,"Home State",t)},expression:"userData['Home State']"}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{staticClass:"large-5 medium-5 small-5 cell",attrs:{id:"userHomeAreaCodeField",name:"form[custom_addresses_attributes][home_address_attributes][postcode]",placeholder:"Post Code",label:"Post Code",field:"text",autocomplete:"off"},model:{value:e.userData["Home Area Code"],callback:function(t){e.$set(e.userData,"Home Area Code",t)},expression:"userData['Home Area Code']"}}),a("InsInputWrap",{staticClass:"large-5 medium-5 small-5 cell",attrs:{id:"userHomeCountryField",name:"form[custom_addresses_attributes][home_address_attributes][country]",placeholder:"Country",label:"Country",field:"text",autocomplete:"off"},model:{value:e.userData["Home Country"],callback:function(t){e.$set(e.userData,"Home Country",t)},expression:"userData['Home Country']"}})],1)]),a("div",{staticClass:"grid-x grid-padding-x spacer-top-m"},[a("div",{staticClass:"large-12 small-12 cell"},[a("h4",{staticClass:"ins-card-heading"},[e._v("Additional Info")])]),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userFacebookField",name:"form[properties_attributes][facebook_link]",placeholder:"Facebook",label:"Facebook Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Facebook"],callback:function(t){e.$set(e.userData,"Facebook",t)},expression:"userData['Facebook']"}}),a("InsInputWrap",{attrs:{id:"userTwitterField",name:"form[properties_attributes][twitter_link]",placeholder:"Twitter",label:"Twitter Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Twitter"],callback:function(t){e.$set(e.userData,"Twitter",t)},expression:"userData['Twitter']"}}),a("InsInputWrap",{attrs:{id:"userYoutubeField",name:"form[properties_attributes][youtube_link]",placeholder:"Youtube",label:"YouTube Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Youtube"],callback:function(t){e.$set(e.userData,"Youtube",t)},expression:"userData['Youtube']"}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsInputWrap",{attrs:{id:"userLinkedinField",name:"form[properties_attributes][linkedin_link]",placeholder:"Linkedin",label:"Linkedin Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Linkedin"],callback:function(t){e.$set(e.userData,"Linkedin",t)},expression:"userData['Linkedin']"}}),a("InsInputWrap",{attrs:{id:"userInstagramField",name:"form[properties_attributes][instagram_link]",placeholder:"Instagram",label:"Instagram Profile Link",field:"text",autocomplete:"off"},model:{value:e.userData["Instagram"],callback:function(t){e.$set(e.userData,"Instagram",t)},expression:"userData['Instagram']"}})],1),a("div",{staticClass:"large-4 medium-6 small-12 cell"},[a("InsTextareaWrap",{attrs:{id:"userNoteField",name:"userNoteField",placeholder:"Notes",label:"Notes",autocomplete:"off",maxlength:"255"},model:{value:e.userData["Notes"],callback:function(t){e.$set(e.userData,"Notes",t)},expression:"userData['Notes']"}})],1)])]),a("div",{staticClass:"grid-x grid-padding-x grid-padding-y"},["edit"==e.formType?a("div",{staticClass:"cell large-4 medium-3 small-12"},[a("ins-button",{attrs:{label:"ARCHIVE COMPANY",color:"negative",type:"button"},on:{onClickInsButton:e.archiveCompany}})],1):e._e(),a("div",{class:("edit"===e.formType?"large-8":"large-12")+" medium-9 small-12 cell text-right"},[a("ins-button",{attrs:{type:"button",label:"Cancel",color:"blue",outlined:"true",size:"normal",disabled:e.submittingForm},on:{onClickInsButton:e.backToList}}),a("ins-button",{attrs:{type:"submit",color:"blue",solid:"true",size:"normal",label:e.buttonLabel,disabled:e.submittingForm},on:{onClickInsButton:e.bindValues}}),"add"===e.formType?a("ins-button",{attrs:{type:"button",label:"Save and Create Another",color:"blue",solid:"true",size:"normal",disabled:e.submittingForm},on:{onClickInsButton:e.saveAddMore}}):e._e()],1)])],1):e._e()])])])])},We=[],ze={name:"EditCompanyDetails",components:{InsInputWrap:I,InsSelectWrap:H,InsImagePickerWrap:Oe,InsTextareaWrap:R},computed:Object(Te["b"])({companyTypes:function(e){return e.SystemFieldsStore.company_type},industryTypes:function(e){return e.SystemFieldsStore.industry_type},administratorList:function(e){return e.SystemFieldsStore.administratorList},googleMapsApiKey:function(e){return e.SystemFieldsStore.google_maps_api_key}}),data:function(){return{showForm:!1,submittingForm:!1,userData:{},userProfile:this.$store.state.CrmStore.userProfile,formType:this.$store.state.CrmStore.formType,formMethod:"",formName:"",fromURL:"/api/customizations",searchAddress:"",searchAddressField:void 0,parentResourceId:"company",profilePictureName:"",authToken:"",location:"",userCountryCode:"au",buttonLabel:"Add Contact",addMore:!1,toastMsg:"",sourceProfile:"/api/get-current-user-data.json",workAreaCodeValue:"",workPhoneNumValue:"",mobileAreaCodeValue:"",mobilePhoneNumValue:"",homeAreaCodeValue:"",homePhoneNumValue:"",loadingCRMData:!1,headers:{},sourceCRMDetails:"/api/get-company-contact-list-data.json?id=",contactModel:{form_configuration_name:"crm_delete_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{is_enabled:"false"}}}}},companyModel:{form_configuration_name:"crm_delete_company",parent_resource_id:"company",form:{properties:{is_enabled:"false"}}}}},methods:{getFilename:function(e){this.profilePictureName=e},base64ToBlob:function(e,t){t=t||"";for(var a=1024,s=window.atob(e),i=[],o=0,r=s.length;o<r;o+=a){for(var n=s.slice(o,o+a),l=new Array(n.length),c=0;c<n.length;c++)l[c]=n.charCodeAt(c);var u=new Uint8Array(l);i.push(u)}return new Blob(i,{type:t})},appendToFormData:function(e){var t=new FormData;return Object(p["each"])(e,function(e,a){t.append(a,e)}),t},backToList:function(){this.$router.push("/customers")},saveAddMore:function(){this.addMore=!0,this.bindValues()},attachFile:function(){this.$refs.profilePic.click()},bindValues:function(){this.submittingForm=!0;var e=this.$refs.mobilePhone.getCountryData();e=e.dialCode;var t=Object(we["a"])({authenticity_token:this.authToken,form_configuration_name:this.formName,parent_resource_id:this.parentResourceId,"form[properties_attributes][company_name]":this.userData["Company"],"form[properties_attributes][is_enabled]":"true","form[properties_attributes][website]":this.userData["Website"],"form[properties_attributes][industry_type]":this.userData["Industry Type"],"form[properties_attributes][company_type]":this.userData["Company Type"],"form[properties_attributes][assigned_to]":this.userData["Assigned To"],"form[properties_attributes][notes]":this.userData["Notes"],"form[custom_addresses_attributes][location_1_attributes][street]":this.userData["Home Street"],"form[custom_addresses_attributes][location_1_attributes][address]":this.userData["Home Address"],"form[custom_addresses_attributes][location_1_attributes][city]":this.userData["Home City"],"form[custom_addresses_attributes][location_1_attributes][state]":this.userData["Home State"],"form[custom_addresses_attributes][location_1_attributes][postcode]":this.userData["Home Area Code"],"form[custom_addresses_attributes][location_1_attributes][country]":this.userData["Home Country"],"form[properties_attributes][mobile_phone_country_code]":e,"form[properties_attributes][mobile_phone_area_code]":document.getElementsByName("userDataMobileAreaCode")[0].value,"form[properties_attributes][mobile_phone_number]":document.getElementsByName("userDataMobilePhoneNumber")[0].value,"form[properties_attributes][facebook_link]":this.userData["Facebook"],"form[properties_attributes][twitter_link]":this.userData["Twitter"],"form[properties_attributes][youtube_link]":this.userData["Youtube"],"form[properties_attributes][linkedin_link]":this.userData["Linkedin"],"form[properties_attributes][google_plus_link]":"","form[properties_attributes][instagram_link]":this.userData["Instagram"]},"form[properties_attributes][notes]",this.userData["Notes"]),a=this.appendToFormData(t),s=this.userData["Profile Image"]?this.userData["Profile Image"]:"";if(""!==s||void 0!==s){var i=s.replace(/^data:image\/(png|jpg|jpeg);base64,/,""),o=s.match(/^data:image\/(png|jpg|jpeg);base64,/);if(o){var r=this.base64ToBlob(i,"image/"+o[1]);a.append("form[custom_images_attributes][profile_image_attributes][image]",r,this.profilePictureName)}}var n=document.getElementById("crmForm");"add"===this.formType&&(this.formURL="/api/customizations"),this.toastMsg="Company",this.formValidate(n)?this.submitForm(a):(this.addMore=!1,this.submittingForm=!1)},submitForm:function(e){var t=this,a={type:this.formMethod,contentType:!1,processData:!1,data:e,success:function(e){t.successHandler()},error:function(e){t.errorHandler(e)}};$.ajax(this.formURL,a)},successHandler:function(){toastIt("success","".concat(this.toastMsg," has been ").concat("add"===this.formType?"created":"updated","."),this.ops),document.getElementById("crmForm").reset(),this.userData["Name"]="",this.userData["Company"]="",!this.addMore&&this.$router.push("/customers"),this.addMore=!1,this.submittingForm=!1},errorHandler:function(e){this.addMore=!1,this.submittingForm=!1;var t="";e.responseJSON&&e.responseJSON.errors&&("undefined"===e.responseJSON.errors.email&&null===e.responseJSON.errors.email||(t+=e.responseJSON.errors.email?"- Email "+e.responseJSON.errors.email[0]+"<br />":""),"undefined"===e.responseJSON.errors.password&&null===e.responseJSON.errors.password||(t+=e.responseJSON.errors.password?"- Password "+e.responseJSON.errors.password[0]:"")),toastIt("error",t,this.ops)},setPhoneValue:function(){var e=this;e.$refs.mobilePhone;setTimeout(function(){$("#mobilePhone .phone").intlTelInput("setNumber","+"+e.userData["Company Mobile Phone Country Code"]),e.mobileAreaCodeValue=e.userData["Company Mobile Phone Area Code"],e.mobilePhoneNumValue=e.userData["Company Mobile Phone Number"]},300)},formValidate:function(e){var t=0,a=this;return Array.from($(".ins-form-field, .ins-select-value-input, .ins-textarea-field")).forEach(function(e){!0!==e.hasAttribute("required")&&"true"!=e.getAttribute("required")||(t+=a.validateInput(e)),"email"===e.getAttribute("type")&&(t+=a.validateEmail(e))}),!(t>0)},validateInput:function(e){return e=e.target?e.target:e,""===e.value.trim()||null===e.value?(this.invalidFieldNotif(e),1):(this.validFieldNotif(e),0)},invalidFieldNotif:function(e){e.closest("ins-input").setAttribute("has-error",!0)},validFieldNotif:function(e){e.closest("ins-input").removeAttribute("has-error")},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return 1==t.test(String(e.value).toLowerCase())?(this.validFieldNotif(e),0):(this.invalidFieldNotif(e),1)},initMap:function(){var e=this;setTimeout(function(){e.googleMapsApiKey.results.length&&(e.searchAddressField=new google.maps.places.Autocomplete(e.$refs.searchAddressField.$el.querySelector("input")),e.searchAddressField.addListener("place_changed",e.fillAddress))},300)},fillAddress:function(){var e=this,t=this.searchAddressField.getPlace();this.searchAddress=t.formatted_address,this.userData["Home Street"]="",this.userData["Home Address"]="",this.userData["Home City"]="",this.userData["Home State"]="",this.userData["Home Country"]="",this.userData["Home Area Code"]="",t.address_components.forEach(function(t){var a=t.types[0];switch(a){case"street_number":e.userData["Home Address"]=t["short_name"]+" ";break;case"route":e.userData["Home Address"]+=t["long_name"];break;case"locality":e.userData["Home City"]=t["long_name"];break;case"colloquial_area":e.userData["Home City"]=t["long_name"];break;case"administrative_area_level_1":e.userData["Home State"]=t["short_name"];break;case"country":e.userData["Home Country"]=t["long_name"];break;case"postal_code":e.userData["Home Area Code"]=t["short_name"];break}})},setFormSettings:function(){var e=this;if("add"===this.formType)this.buttonLabel="Create",this.formMethod="POST",this.formURL="/api/customizations",this.parentResourceId="company",this.formName="add_new_company",this.userData={};else if("view"===this.formType){this.buttonLabel="Update",this.userData=this.$store.state.CrmStore.userData,this.formMethod="",this.formURL="",this.formName="";for(var t=document.getElementById("crmForm"),a=t.elements,s=0,i=a.length;s<i;++s)a[s].readOnly=!0,a[s].disabled=!0;this.setPhoneValue()}else"edit"===this.formType?(this.buttonLabel="Update",this.userData=e.$store.state.CrmStore.userData,this.formMethod="PUT",this.formURL="/api/customizations/".concat(this.userData.id),this.parentResourceId="company",this.formName="crm_update_company",this.setPhoneValue()):"remove"===this.formType?this.userData=this.$store.state.CrmStore.userData:this.$router.push("/customers");this.showForm=!0,this.initMap()},archiveCompany:function(){var e=this,t="Are you sure you want to archive this company? This will also archive related contacts.";swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(t,'">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(t){t.value&&e.getAllContacts()})},getAllContacts:function(){var e=this,t="".concat(this.sourceCRMDetails).concat(this.userData.id,"&sortBy=updated_at&orderBy=desc");this.$http.get(t).then(function(t){t.data.items.results.length?e.deleteAllContacts(t.data.items.results):e.deleteCompany()}).catch(this.errorHandler)},deleteAllContacts:function(e){var t=this,a=!0,s=0;e.forEach(function(i){if(a){var o="/api/users/".concat(i.id),r=JSON.stringify(t.contactModel);t.$http.put(o,r,{headers:t.headers}).then(function(a){s++,s===e.length&&t.deleteCompany()}).catch(function(e){t.errorHandler(e),a=!1})}})},deleteCompany:function(){var e=this,t="/api/customizations/".concat(this.userData.id),a=JSON.stringify(this.companyModel);this.$http.put(t,a,{headers:this.headers}).then(function(t){toastIt("success","Successfully archived company.",e.ops),e.$store.commit("removeCompanyOption",e.userData.id),e.$router.push("/customers")}).catch(this.errorHandler)},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t?"add"===this.formType?t.updateRouteLabel("Add Company"):"edit"===this.formType&&t.updateRouteLabel("Edit Company"):setTimeout(function(){e.setInsRendererLabel()},300)}},mounted:function(){var e=this;this.setInsRendererLabel(),this.headers=JSON.parse(JSON.stringify(this.apiHeader)),setTimeout(function(){e.$store.state.CrmStore.userData["Company Mobile Phone Country Code"]=""===e.$store.state.CrmStore.userData["Company Mobile Phone Country Code"]?"61":e.$store.state.CrmStore.userData["Company Mobile Phone Country Code"],e.setFormSettings()},500),"localhost"!==window.location.hostname?this.authToken=JSON.parse(document.getElementById("formConfig").innerHTML):(this.authToken="+Qj2j1eQpuy1fFxW6atnOluUyHLbL5cwDYL14rhASm13C+nkIPB6A5Ajxf/Cf1xFveFpEKMUd812HpUhyiBShQ==",this.location="")}},Ue=ze,Ke=(a("fac5"),Object(A["a"])(Ue,Re,We,!1,null,null,null));Ke.options.__file="EditCompanyDetails.vue";var Je=Ke.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"case-list-tbl"}},[a("div",{attrs:{id:"case-filters"}}),a("ins-base-table",{attrs:{id:"insBaseTable","searchbar-placeholder":"Search by Subject, Contact, Email or Assignee ..."},on:{onPaginationChange:e.tablePaginationHandler,onTableSearch:e.tableSearchHandler,onTableSort:e.tableSortHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler}})],1)},qe=[],Ge={name:"ListCases",components:{},data:function(){return{caseData:this.caseData,source:"/api/get-all-cases-data.json",sourceCaseData:"/api/get-case-data.json?id=",sourceAdminData:"/api/get-crm-data.json?id=",totalCount:0,pageNumber:1,pageSize:10,searchKeyword:"",sortedKeyword:"created_at",sortedBy:"desc",headers:{},rawFormData:{utf8:"âœ“",form_configuration_name:"delete_case_customization",authenticity_token:"",resource_id:"new",parent_resource_id:"",parent_resource_class:"CustomModelType",_method:"DELETE",customization_id:""},continueDeletion:!1}},methods:{onFilterApplyHandler:function(e){e.detail["Case Status"]},tablePaginationHandler:function(e){this.insBaseTable.loadingScreen=!0,this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchDataFromSrc()},tableSearchHandler:function(e){var t=this;if(13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword){if(this.insBaseTable.loadingScreen=!0,this.searchKeyword=e.detail.value,!this.searchKeyword)return void this.processTableData();this.filteredData=[],this.rawData.forEach(function(e){Object.keys(e).forEach(function(a){if("Subject"===a||"Contact"===a||"Email"===a||"Assigned To"===a){var s=e[a];if(console.log("value ",e," ",a),console.log("match ",s,"search: ",t.searchKeyword.toLowerCase()),s.toLowerCase().includes(t.searchKeyword.toLowerCase())){var i=t.filteredData.find(function(t){return t.id===e.id});i||t.filteredData.push(e)}}})}),this.sortedKeyword&&this.filteredData.length>0&&this.filteredData.sort(this.dynamicKeySort(this.sortedKeyword)),this.insBaseTable.pageNumber=1,this.processTableData(),this.filteredData.length||(this.insBaseTable.loadingScreen=!0,this.insBaseTable.loaderTitle="",this.insBaseTable.loaderMessage='No result found for "'+this.searchKeyword+'"',this.insBaseTable.loaderIcon="")}},dynamicKeySort:function(e,t){var a="asc"===t?1:-1;return function(t,s){var i=t[e]<s[e]?-1:t[e]>s[e]?1:0;return i*a}},tableSortHandler:function(e){this.sortedKeyword=e.detail.keyword,this.sortedBy=e.detail.order,this.searchKeyword?this.filteredData.sort(this.dynamicKeySort(this.sortedKeyword,this.sortedBy)):this.rawData.sort(this.dynamicKeySort(this.sortedKeyword,this.sortedBy)),this.processTableData()},tableBulkActionHandler:function(e){"Delete"===e.detail.action&&this.archiveSelection(e.detail.selections)},tableRowActionHandler:function(e){"View"===e.detail.action&&this.viewItem(e.detail),"Delete"===e.detail.action&&this.deleteItem(e.detail,!0)},archiveSelection:function(e){console.log("sections: ",e);var t=this;swal({title:"",html:'\n                <ins-loader\n                    state-icon="warning"\n                    icon-color="warning"\n                    state-message="Are you sure you want to delete these cases?">\n                </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Delete"}).then(function(a){if(a.value){var s=0;t.continueDeletion=!0,e.forEach(function(){var a=Object(de["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(!t.continueDeletion){a.next=5;break}return a.next=3,t.deleteCase(i,!1);case 3:s++,e.length===s&&(t.continueDeletion=!1,parent.toastIt("success","Cases have been deleted.",t.ops),t.fetchDataFromSrc());case 5:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())}})},deleteItem:function(e,t){var a=this,s="Are you sure you want to delete this case?";swal({title:"",html:'\n                <ins-loader\n                    state-icon="warning"\n                    icon-color="warning"\n                    state-message="'.concat(s,'">\n                </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Delete"}).then(function(t){t.value&&(a.continueDeletion=!0,a.deleteCase(e.data,!0))}).catch(function(e){a.continueDeletion=!1,console.error("error",e),parent.toastIt("error","Failed to delete case.",a.ops),a.fetchDataFromSrc()})},deleteCase:function(e,t){var a=this,s="/api/customizations/".concat(e.id);this.rawFormData.customization_id=e.id,this.rawFormData.parent_resource_id=e.raw.case_type;var i=this.appendToFormData(this.rawFormData);this.$http.post(s,i).then(function(e){a.continueDeletion||(t&&parent.toastIt("success","Successfully deleted case.",a.ops),a.fetchDataFromSrc())}).catch(function(e){a.continueDeletion=!1,console.error("error",e),parent.toastIt("error","Failed to delete case.",a.ops),a.fetchDataFromSrc()})},appendToFormData:function(e){var t=new FormData;return Object(p["each"])(e,function(e,a){t.append(a,e)}),t},viewItem:function(e){this.$store.commit("pushCaseData",e.data),this.$router.push("/case-details")},processTableData:function(){var e=this,t=this.pageNumber*this.pageSize,a=t-this.pageSize;this.displayedData=[],this.searchKeyword?(this.insBaseTable.totalCount=this.filteredData.length,this.filteredData.forEach(function(s,i){i>=a&&i<=t?e.displayedData.push(s):e.filteredData.length<e.pageSize&&e.displayedData.push(s)})):(this.rawData.forEach(function(s,i){i>=a&&i<t&&e.displayedData.push(s)}),this.insBaseTable.totalCount=this.rawData.length,this.displayedData.sort(this.dynamicKeySort(this.sortedKeyword,this.sortedBy))),this.insBaseTable.tableData=this.displayedData,this.insBaseTable.loadingScreen=!1},loaderStateHandler:function(e,t,a){this.insBaseTable.loadingScreen=!0,this.insBaseTable.loaderTitle=e,this.insBaseTable.loaderMessage=t,this.insBaseTable.loaderIcon=a},fetchDataFromSrc:function(){var e=this;this.rawData=[],this.displayedData=[],this.filteredData=[],this.loaderStateHandler("Processing Your Data","Just a moment, we're fetching and processing your data.","processing"),this.insBaseTable.loadingScreen=!0;var t="".concat(this.source,"?size=1000&page=1&sortBy=").concat(this.sortedKeyword,"&orderBy=").concat(this.sortedBy);this.$http.get(t).then(function(t){var a=t.data.items.results;a.length?e.bindTableData(a):(e.insBaseTable.loaderTitle="",e.searchKeyword?e.insBaseTable.loaderMessage='No results for "'.concat(e.searchKeyword,'"'):e.insBaseTable.loaderMessage="There are no Admin Users yet.",e.insBaseTable.loaderIcon="no-data")}).catch(function(t){console.error("Error: "+t),e.errorHandler()})},errorHandler:function(){this.insBaseTable.loaderTitle=void 0,this.insBaseTable.loaderMessage="Failed to load Data. Please try again.",this.insBaseTable.loaderIcon="error"},checkValue:function(e,t){return e&&"undefined"!==e&&null!==e?"".concat(t?"+":"").concat(e):""},capitalize:function(e){return this.checkValue(e).replace("_"," ").split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")},getName:function(e){var t="";return Object(p["isEmpty"])(e.userData)||(e.userData.name?t=e.userData.name:(""!==this.checkValue(e.userData.first_name)&&(t=this.userData.first_name),""!==this.checkValue(this.userData.last_name)&&(t+=" ".concat(e.userData.last_name)))),t},getEmail:function(e){return Object(p["isEmpty"])(e.userData)?"":e.userData.email?e.userData.email:e.userData.email_address?e.userData.email_address:""},getPhone:function(e,t){return Object(p["isEmpty"])(t)?"":this.constructPhoneNumber(e,t)},constructPhoneNumber:function(e,t){var a="";return""!=this.checkValue(t.contact_number)&&(a="".concat(this.checkValue(t.contact_number[e+"_phone_country_code"],!0)),a+=" ".concat(this.checkValue(t.contact_number[e+"_phone_area_code"])),a+=" ".concat(this.checkValue(t.contact_number[e+"_phone_number"]))),a.trim()},getCaseData2:function(e){var t=this,a="".concat(this.sourceCaseData).concat(e);return new Promise(function(e,s){t.$http.get(a).then(function(t){var a=t.data.items.results;e({state:!0,data:a})}).catch(function(e){window.error_test=e;var t=e,a=Object.keys(t).length;if(0===a)s({state:!1,issue:"other_issue"});else{var i=t["request"]["status"];s(429===i?{state:!1,issue:429}:{state:!1,issue:"other_issue"})}})})},getCaseDataWrapperRetry:function(e){var t=this,a=3;return new Promise(function(s){(function a(i){0==i&&s([]),setTimeout(Object(de["a"])(regeneratorRuntime.mark(function o(){var r;return regeneratorRuntime.wrap(function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.getCaseData2(e);case 3:r=o.sent,s(r),o.next=10;break;case 7:o.prev=7,o.t0=o["catch"](0),429===o.t0.issue?(i-=1,a(i)):s([]);case 10:case"end":return o.stop()}},o,this,[[0,7]])})),2e3)})(a)})},getAssignedTo:function(e){var t=this,a="".concat(this.sourceAdminData).concat(e);return this.$http.get(a).then(function(e){var t=e.data.items.results;return t.length>0?"".concat(t[0].first_name," ").concat(t[0].last_name):""}).catch(function(e){return console.error("Error: "+e),t.errorHandler(),""})},bindTableData:function(e){var t=this,a=[];e.forEach(function(){var s=Object(de["a"])(regeneratorRuntime.mark(function s(i){var o,r,n,l,c;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return"",o="",r="new",n=[],s.next=6,t.getCaseDataWrapperRetry(i.case_id);case 6:if(l=s.sent,!l.data){s.next=21;break}if(!(l.data.length>0)){s.next=21;break}if(n=l.data[0],""===t.checkValue(n.assigned_to)){s.next=16;break}return s.next=13,t.getAssignedTo(n.assigned_to);case 13:s.t0=s.sent,s.next=17;break;case 16:s.t0="";case 17:o=s.t0,r=""!==t.checkValue(n.status)?n.status.toLowerCase():"new",console.log("case: ",n),console.log("id: ",n.assigned_to,"assigned_to: ",o);case 21:c={id:i.case_id,raw:i,caseData:n,Subject:"".concat(t.capitalize(t.checkValue(i.case_label))),Contact:t.getName(i),Email:t.getEmail(i),"Mobile Phone":t.getPhone("mobile",i.userData),"Assigned To":o,"Date Created":D()(i.created_at).calendar(null,{sameElse:"Do MMM YYYY"}),created_at:i.created_at,Status:r},a.push(c),t.rawData=a,e.length===a.length&&t.processTableData();case 25:case"end":return s.stop()}},s,this)}));return function(e){return s.apply(this,arguments)}}())},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Cases"):setTimeout(function(){e.setInsRendererLabel()},300)}},mounted:function(){this.setInsRendererLabel(),this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.rawFormData.authenticity_token=this.headers["X-CSRF-Token"],this.insBaseTable=document.getElementById("insBaseTable"),this.insBaseTable.rowActions=["View","Delete"],this.insBaseTable.bulkActions=["Delete"],this.insBaseTable.tableHeaders=[{label:"Subject",type:"string",sortable:!0,hasColumnAction:!0,hasLink:!0},{label:"Contact",type:"string",sortable:!0},{label:"Email",type:"string",sortable:!0},{label:"Mobile Phone",type:"string",sortable:!1},{label:"Assigned To",type:"string",sortable:!0},{label:"Date Created",type:"string",sortable:!0},{label:"Status",type:"string",sortable:!0,hasTag:!0}],this.fetchDataFromSrc()}},Xe=Ge,Qe=(a("8b75"),Object(A["a"])(Xe,Ye,qe,!1,null,null,null));Qe.options.__file="ListCases.vue";var Ze=Qe.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-container-full",attrs:{id:"caseDetails"}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-6 medium-12 small-12 margin-bottom-30"},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("h4",[e._v("Case Details")]),a("table",{staticClass:"information-wrap"},[a("tr",[a("td",{staticClass:"td-label"},[e._v("Case ID")]),a("td",[e._v(e._s(e.checkValue(e.caseDetails["id"])))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Date Created")]),a("td",[e._v(e._s(e.checkValue(e.caseDate)))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Form Title")]),a("td",[e._v(e._s(e.checkValue(e.capitalize(e.caseDetails.raw.case_label))))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Work Flow")]),a("td",[e._v("-")])])]),a("InsSelectWrap",{attrs:{id:"userAssignedToField",name:"userAssignedToField",label:"Assigned To",placeholder:"- Select -","dynamic-placeholder":"Please enter option",searchable:""},model:{value:e.caseAssignedTo,callback:function(t){e.caseAssignedTo=t},expression:"caseAssignedTo"}},e._l(e.administratorList.results,function(t){return a("ins-select-option",{key:t.id,attrs:{label:e.checkValue(t.first_name)+" "+e.checkValue(t.last_name),value:t.id}})})),a("InsSelectWrap",{attrs:{id:"caseStatus",name:"caseStatus",label:"Status",placeholder:"- Select -"},model:{value:e.caseStatus,callback:function(t){e.caseStatus=t},expression:"caseStatus"}},[a("ins-select-option",{attrs:{label:"New",value:"new"}}),a("ins-select-option",{attrs:{label:"Flagged",value:"flagged"}}),a("ins-select-option",{attrs:{label:"Open",value:"open"}}),a("ins-select-option",{attrs:{label:"Closed",value:"closed"}})],1)],1)])]),a("div",{staticClass:"grid-x grid-padding-y"},[a("div",{staticClass:"cell large-6 medium-6 small-12"},[a("ins-button",{attrs:{label:"Delete Case",type:"button",color:"negative"},on:{onClickInsButton:e.deleteItem}})],1),a("div",{staticClass:"cell large-6 medium-6 small-12 text-right"},[a("ins-button",{attrs:{label:"Update Details",type:"button",color:"solid"},on:{onClickInsButton:e.updateItem}})],1)])],1),a("div",{staticClass:"cell large-6 medium-12 small-12 margin-bottom-30"},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("h4",[e._v("Form Submission")]),a("table",{staticClass:"information-wrap"},e._l(e.caseSubmissionData,function(t){return"case_id"!==t.label?a("tr",{key:t.case_id},[a("td",{staticClass:"td-label"},[e._v(e._s(t.label))]),"text"===t.type?a("td",[e._v(e._s(t.value))]):e._e(),"email"===t.type?a("td",[a("a",{attrs:{href:"mailto:"+t.value}},[e._v(e._s(t.value))])]):e._e()]):e._e()}))])])])],1)])])},tt=[],at={name:"CaseDetails",components:{InsSelectWrap:H},data:function(){return{administratorSource:"/api/get-all-administrator-list-data.json",adminList:[],sourceCaseData:"/api/get-case-data.json?id=",caseDetails:{},caseDate:"",caseAssignedTo:"",caseStatus:"new",caseForm:[],caseSubmissionData:[],headers:{},newCase:!0,rawFormData:{utf8:"âœ“",form_configuration_name:"delete_case_customization",authenticity_token:"",resource_id:"new",parent_resource_id:"",parent_resource_class:"CustomModelType",_method:"DELETE",customization_id:""},addCaseFormData:{form_configuration_name:"add_case_details",parent_resource_id:"cases",form:{properties:{assigned_to:"",case_id:"",status:""}}}}},computed:Object(Te["b"])({caseData:function(e){return e.CaseStore.caseData},administratorList:function(e){return e.SystemFieldsStore.administratorList}}),methods:{setCaseData:function(){this.caseDetails=this.caseData,this.caseAssignedTo=this.caseDetails.caseData?this.caseDetails.caseData.assigned_to:"",this.caseStatus=this.caseDetails.caseData?this.caseDetails.caseData.status:"new",Object(p["isEmpty"])(this.caseDetails)?this.$router.push("/cases"):this.bindCase()},bindCase:function(){this.caseDate=D()(this.caseDetails.raw.created_at).format("DD-MMM-YYYY hh:mm A ZZ");var e=this.caseDetails.raw.case_data;for(var t in e){var a=t.toLowerCase().indexOf("email")>=0?"email":"text",s={label:this.capitalize(t),value:this.checkValue(e[t]),type:a};this.caseSubmissionData.push(s)}this.caseSubmissionData.sort(this.dynamicKeySort("label","asc"))},checkValue:function(e,t){return e&&"undefined"!==e&&null!==e?"".concat(t?"+":"").concat(e):""},capitalize:function(e){return this.checkValue(e).replace(/_/g," ").split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substring(1)}).join(" ")},dynamicKeySort:function(e,t){var a="asc"===t?1:-1;return function(t,s){var i=t[e]<s[e]?-1:t[e]>s[e]?1:0;return i*a}},deleteItem:function(){var e=this,t="Are you sure you want to delete this case?",a=this;swal({title:"",html:'\n                <ins-loader\n                    state-icon="warning"\n                    icon-color="warning"\n                    state-message="'.concat(t,'">\n                </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Delete"}).then(function(t){t.value&&(e.continueDeletion=!0,e.deleteCase(a.caseDetails))})},deleteCase:function(e){var t=this,a="/api/customizations/".concat(e.id);this.rawFormData.customization_id=e.id,this.rawFormData.parent_resource_id=e.raw.case_type;var s=this.appendToFormData(this.rawFormData);this.$http.post(a,s).then(function(e){parent.toastIt("success","Case has been successfully deleted.",t.ops),t.$router.push("/cases")}).catch(function(e){console.error("error",e),parent.toastIt("error","Failed to delete case.",t.ops)})},appendToFormData:function(e){var t=new FormData;return Object(p["each"])(e,function(e,a){t.append(a,e)}),t},updateItem:function(){var e=Object(de["a"])(regeneratorRuntime.mark(function e(){var t,a,s,i,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="",a=[],s="post",this.addCaseFormData.form.properties.assigned_to=this.caseAssignedTo,this.addCaseFormData.form.properties.case_id=this.caseDetails.id,this.addCaseFormData.form.properties.status=this.caseStatus,i=JSON.stringify(this.addCaseFormData),e.next=9,this.getCaseData(this.caseDetails.id);case 9:a=e.sent,this.newCase&&!a.length?(t="/api/customizations",s="post"):(t="/api/customizations/".concat(a[0].id),s="put"),this.$http[s](t,i,{headers:this.headers}).then(function(e){parent.toastIt("success","Case has been updated.",o.ops)}).catch(function(e){parent.toastIt("error","Failed to update case.",o.ops)});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getCaseData:function(e){var t=this,a="".concat(this.sourceCaseData).concat(e),s=this;return this.$http.get(a).then(function(e){var t=e.data.items.results;return t.length?(s.newCase=!1,t):(s.newCase=!0,[])}).catch(function(e){return console.error("Error: "+e),t.errorHandler(),[]})},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Case Details"):setTimeout(function(){e.setInsRendererLabel()},300)}},mounted:function(){this.setInsRendererLabel(),this.setCaseData()},created:function(){this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.rawFormData.authenticity_token=this.headers["X-CSRF-Token"]}},st=at,it=(a("0c31"),Object(A["a"])(st,et,tt,!1,null,null,null));it.options.__file="CaseDetails.vue";var ot=it.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-container-full"},[e.companyData?a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-8 medium-12 small-12 margin-bottom-30"},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("ProfileHead",{attrs:{"profile-name":e.checkValue(e.companyData["Company"]),"profile-img":e.checkValue(e.companyData["Company_Img"]),"profile-facebook":e.checkValue(e.companyData["Facebook"]),"profile-google-plus":e.checkValue(e.companyData["Google"]),"profile-instagram":e.checkValue(e.companyData["Instagram"]),"profile-linkedin":e.checkValue(e.companyData["Linkedin"]),"profile-twitter":e.checkValue(e.companyData["Twitter"]),"profile-youtube":e.checkValue(e.companyData["Youtube"])}}),a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("div",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-6 medium-12 small-12"},[a("table",{staticClass:"information-wrap"},[a("tr",[a("td",{staticClass:"td-label"},[e._v("Customer ID")]),a("td",[e._v(e._s(e.checkValue(e.companyData["company_id"])))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Phone")]),a("td",[e._v(e._s(e.constructPhoneNumber()))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Website")]),a("td",[a("a",{attrs:{href:e.checkURL(e.companyData["Website"]),target:"_blank"}},[e._v("\n                          "+e._s(e.checkValue(e.companyData["Website"]))+"\n                        ")])])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Assigned To")]),a("td",[e.assignedAdmin?a("span",[e._v("\n                          "+e._s(e.assignedAdmin.first_name+" "+e.assignedAdmin.last_name)+"\n                        ")]):e._e()])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Company Type")]),a("td",[e.companyType?a("span",[e._v("\n                          "+e._s(e.companyType.value)+"\n                        ")]):e._e()])]),e.industryType?a("tr",[a("td",{staticClass:"td-label"},[e._v("Industry Type")]),a("td",[e.industryType?a("span",[e._v("\n                          "+e._s(e.industryType.value)+"\n                        ")]):e._e()])]):e._e()])]),a("div",{staticClass:"cell large-6 medium-12 small-12"},[a("GoogleMapDirection",{attrs:{address:e.constructedAddress}})],1)])]),a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("div",{staticClass:"notes-wrap"},[a("InsTextareaWrap",{attrs:{label:"Notes",value:e.checkValue(e.companyData["Notes"]),readonly:""}})],1)]),a("div",{staticClass:"cell large-12 medium-12 small-12 text-right"},[a("ins-button",{attrs:{label:"EDIT COMPANY",outlined:""},on:{onClickInsButton:e.editCompanyHandler}})],1)],1)])])],1),a("div",{staticClass:"cell large-4 medium-12 small-12 activities-if margin-bottom-30"},[a("AdminActivities",{attrs:{activities:e.activities}})],1),a("div",{staticClass:"cell large-12 medium-12 small-12 margin-bottom-30",attrs:{id:"contactListWrapper"}},[a("ins-button",{staticClass:"add-new-contact-btn",attrs:{label:"ADD NEW CONTACT",solid:""},on:{onClickInsButton:e.addNewContactHandler}}),a("ContactList",{attrs:{"company-id":e.companyData["company_id"]}})],1),a("div",{staticClass:"cell large-12 medium-12 small-12 margin-bottom-30"},[a("ins-button",{attrs:{label:"ARCHIVE COMPANY",color:"negative"},on:{onClickInsButton:e.archiveCompany}})],1)]):e._e()])},nt=[],lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ins-card",{attrs:{"no-padding":"",steady:""}},[a("div",{staticClass:"activities-header"},[a("h1",[e._v("Timeline")])]),a("div",{staticClass:"grid-x grid-padding-x activities-wrap"},[e.activities?a("div",{staticClass:"large-12 medium-12 small-12 cell",attrs:{id:"activity-container-list"}},e._l(e.activities,function(t){return a("div",{key:t.id,staticClass:"grid-x grid-padding-x activity-row"},[a("div",{staticClass:"large-12 medium-12 small-12 cell no-padding-left"},[a("div",{staticClass:"stick-wrap"},[a("div",{class:["icon-wrap "+t.attributes.type]},[a("i",{staticClass:"icon-type icon-work"}),a("i",{staticClass:"icon-type icon-phone"}),a("i",{staticClass:"icon-type icon-mail"}),a("i",{staticClass:"icon-type icon-headset"}),a("i",{staticClass:"icon-type icon-notepad"}),a("i",{staticClass:"icon-type icon-notepad-1"}),a("i",{staticClass:"icon-type icon-goal-1"}),a("i",{staticClass:"icon-type icon-check"})])]),a("span",{staticClass:"date-time-wrap"},[a("div",{staticClass:"date"},[e._v(" "+e._s(t.attributes.date)+" ")]),a("div",{staticClass:"time"},[e._v(" "+e._s(t.attributes.time)+" ")])]),a("div",{staticClass:"details-wrap",domProps:{innerHTML:e._s(t.attributes.details)}}),a("div",{staticClass:"actions-wrap"},[a("button",{staticClass:"edit-btn",on:{click:function(a){e.editActivity(t)}}},[a("i",{staticClass:"icon-edit"})]),a("button",{staticClass:"delete-btn",on:{click:function(a){e.deleteActivity(t.id)}}},[a("i",{staticClass:"icon-delete"})])])])])})):e._e(),e.activities?e._e():a("div",{staticClass:"large-12 medium-12 small-12 cell"},[a("ins-loader",{attrs:{"state-title":"","state-message":"No Activites. This is a premium feature.","state-icon":""}})],1)])])},ct=[],ut={name:"AdminActivities",computed:{},props:["activities"],methods:{editActivity:function(e){$("#activityModal").foundation("open")},addActivity:function(){$("#activityModal").foundation("open")},deleteActivity:function(e){var t=this,a="".concat(t.apiBaseUrl,"/activities/").concat(e),s=t.apiHeader.headers;$.ajax({url:a,method:"DELETE",headers:s,success:function(e){var t=this.$router.history.current.params.id,a=this.apiBaseUrl+"/checks/"+t+"/activities";this.$store.dispatch("getTimeline",{url:a}),v()("","Activity deleted successfully.","success")},error:function(e){v()("","Failed to delete activity. Please try again.","error")}})}}},dt=ut,mt=(a("a579"),Object(A["a"])(dt,lt,ct,!1,null,"0bfcf750",null));mt.options.__file="AdminActivities.vue";var ht=mt.exports,pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile-header-wrap"},[e.profileInitials?a("div",{staticClass:"profile-image-wrap"},[e.profileImg?a("img",{attrs:{src:e.profileImg,alt:e.profileName+" Profile Image"}}):e._e(),e.profileImg?e._e():a("div",{staticClass:"initials"},[e._v("\n      "+e._s(e.profileInitials)+"\n    ")])]):e._e(),a("div",{staticClass:"profile-name-wrap"},[a("h2",[e._v(e._s(e.profileName))])]),a("div",{staticClass:"social-links-wrap"},[e.profileFacebook?a("a",{staticClass:"social-link",attrs:{target:"_blank",href:e.checkURL(e.profileFacebook)}},[a("i",{staticClass:"icon-facebook-square"})]):e._e(),e.profileGooglePlus?a("a",{staticClass:"social-link",attrs:{target:"_blank",href:e.checkURL(e.profileGooglePlus)}},[a("i",{staticClass:"icon-google-plus-square"})]):e._e(),e.profileInstagram?a("a",{staticClass:"social-link",attrs:{target:"_blank",href:e.checkURL(e.profileInstagram)}},[a("i",{staticClass:"icon-instagram"})]):e._e(),e.profileLinkedin?a("a",{staticClass:"social-link",attrs:{target:"_blank",href:e.checkURL(e.profileLinkedin)}},[a("i",{staticClass:"icon-linkedin-square"})]):e._e(),e.profileTwitter?a("a",{staticClass:"social-link",attrs:{target:"_blank",href:e.checkURL(e.profileTwitter)}},[a("i",{staticClass:"icon-twitter-square"})]):e._e(),e.profileYoutube?a("a",{staticClass:"social-link",attrs:{target:"_blank",href:e.checkURL(e.profileYoutube)}},[a("i",{staticClass:"icon-youtube-square"})]):e._e()])])},ft=[],bt={name:"ProfileHead",props:["profileName","profileImg","profileFacebook","profileTwitter","profileInstagram","profileGooglePlus","profileLinkedin","profileYoutube"],data:function(){return{profileInitials:""}},methods:{getInitials:function(){if(this.profileName){var e="",t=this.profileName.split(" ");return t.length>1&&(e="".concat(t[0][0]).concat(t[1][0])),1===t.length&&(e="".concat(t[0][0]).concat(t[0][1])),e}return!1},checkURL:function(e){return e.includes("https://")?e:e.includes("http://")?e:"//".concat(e)}},mounted:function(){this.profileInitials=this.getInitials()}},yt=bt,gt=(a("a215"),Object(A["a"])(yt,pt,ft,!1,null,"62eac04b",null));gt.options.__file="ProfileHead.vue";var _t=gt.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"google-map-direction-wrap"},[a("div",{staticClass:"map-wrap"},[e.googleMapsApiKey.results.length&&!e.address?a("div",{staticClass:"no-location",style:"background-image: "+e.bgImg},[e._v("\n      Map not Available\n    ")]):e._e(),e.googleMapsApiKey.results.length||e.address?e._e():a("div",{staticClass:"no-location",style:"background-image: "+e.bgImg},[e._v("\n      No Google Maps API Key\n    ")]),e.address?a("div",{attrs:{id:"profileMap"}}):e._e()]),a("div",{staticClass:"address-wrap"},[a("span",[e._v(e._s(e.address))])]),e.address?a("div",{staticClass:"direction-wrap"},[a("a",{attrs:{target:"_blank",href:e.checkURL("http://www.google.com/maps/search/"+e.address)}},[a("i",{staticClass:"icon-location-arrow"}),a("span",[e._v("Get Directions")])])]):e._e()])},Ct=[],Dt={name:"GoogleMapDirection",props:["address","location"],computed:Object(Te["b"])({googleMapsApiKey:function(e){return e.SystemFieldsStore.google_maps_api_key}}),data:function(){return{bgImg:""}},methods:{checkURL:function(e){return e.includes("https://")?e:e.includes("http://")?e:"//".concat(e)}},mounted:function(){"localhost"===document.location.hostname&&(this.bgImg="/assets/google-map-placeholder")}},kt=Dt,wt=(a("80c5"),Object(A["a"])(kt,vt,Ct,!1,null,"478f6d40",null));wt.options.__file="GoogleMapDirection.vue";var Tt=wt.exports,St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ins-base-table",{ref:"contactListTable",attrs:{id:"testTable"},on:{onPaginationChange:e.tablePaginationHandler,onTableSearch:e.tableSearchHandler,onTableSort:e.tableSortHandler,onTableBulkAction:e.tableBulkActionHandler,onTableRowAction:e.tableRowActionHandler}})},At=[],Ft={name:"ViewCompanyDetails",props:["companyId"],data:function(){return{hasTableData:!1,searchKeyword:"",pageNumber:1,pageSize:10,sortBy:"email",sortOrder:"asc",source:"/api/get-company-contact-list-data.json",sourceSearch:"/api/search-company-contact-list-data.json",contactModel:{form_configuration_name:"crm_delete_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{is_enabled:"false"}}}}},headers:{}}},methods:{tablePaginationHandler:function(e){this.pageSize=e.detail.pageSize,this.pageNumber=e.detail.pageNumber,this.fetchContactList()},tableSearchHandler:function(e){13===e.detail.keyCode&&""!==e.detail.value||""===e.detail.value&&""!==this.searchKeyword?(this.searchKeyword=e.detail.value,this.pageNumber=1,this.fetchContactList()):""===e.detail.value&&(this.searchKeyword="",this.pageNumber=1,this.fetchContactList())},tableSortHandler:function(e){this.sortBy=e.detail.keyword,this.sortOrder=e.detail.order,this.fetchContactList()},tableBulkActionHandler:function(e){var t=this;switch(e.detail.action){case"Archive":this.warnUser("Are you sure you want to archive these contacts?").then(function(a){return!!a.value&&t.archiveSelection(e.detail.selections)});break}},tableRowActionHandler:function(e){var t=this;switch(e.detail.action){case"Archive":this.warnUser("Are you sure you want to archive this contact?").then(function(a){return!!a.value&&t.archiveItem(e.detail.data.id)});break;case"Edit":this.editContactHandler(e.detail.data);break;case"View":this.viewContactHandler(e.detail.data);break}},archiveSelection:function(e){var t=this,a=0;e.forEach(function(s){a++,t.archiveItem(s.id,e.length,a)})},archiveItem:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i="/api/users/".concat(e),o=JSON.stringify(this.contactModel);this.$http.put(i,o,{headers:this.headers}).then(function(e){s===a&&(toastIt("success","Successfully delete contact".concat(a>1?"s":""),t.ops),t.fetchContactList())}).catch(function(e){console.error("error",e),toastIt("error","Failed to archive contact",t.ops)})},warnUser:function(e){return swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(e,'">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Archive"})},alertHandler:function(e,t){},editContactHandler:function(e){e["Contact Type"]=e.temp_contact_type,this.$store.commit("pushUserData",e),this.$store.commit("pushFormType","edit"),this.$router.push("/manage-crm")},viewContactHandler:function(e){this.$store.commit("setContactData",e),this.$router.push("/view-contact")},fetchContactList:function(){this.loadingStateHandler("Processing Your Data","Just a moment, we're fetching and processing your data.","processing");var e="";e=this.searchKeyword?this.constructURL(this.sourceSearch):this.constructURL(this.source),this.$http.get(e).then(this.responseHandler).catch(this.errorHandler)},responseHandler:function(e){var t=e.data.items;this.$refs.contactListTable.totalCount=t.total_entries,t.total_entries?(this.$refs.contactListTable.pageNumber=this.pageNumber,this.$refs.contactListTable.pageSize=this.pageSize,this.$refs.contactListTable.loadingScreen=!1,this.$refs.contactListTable.tableData=this.constructTableData(t.results)):this.searchKeyword?this.loadingStateHandler("",'No results for "'.concat(this.searchKeyword,'".'),"no data"):this.loadingStateHandler("","No contacts yet.","no data")},errorHandler:function(e){console.error("error",e),this.loadingStateHandler("","Failed to fetch contact list. Please try again.","error")},loadingStateHandler:function(e,t,a){this.$refs.contactListTable.loadingScreen=!0,this.$refs.contactListTable.loaderTitle=e,this.$refs.contactListTable.loaderMessage=t,this.$refs.contactListTable.loaderIcon=a},constructURL:function(e){var t="".concat(e,"?id=").concat(this.companyId);return t+="&size=".concat(this.pageSize),t+="&page=".concat(this.pageNumber),t+="&sortBy=".concat("Name"===this.sortBy?"first_name":"email"),t+="&orderBy=".concat(this.sortOrder),t+="&keyword=".concat(this.searchKeyword),t},constructTableHeader:function(e,t,a,s,i){return{label:e,type:t,sortable:a,hasImage:s,hasColumnAction:i}},constructTableData:function(e){return e.map(this.constructCRMTableData)},checkValue:function(e,t){return e&&"undefined"!==e&&"null"!==e&&e?"".concat(t?"+":"").concat(e):""},constructPhoneNumber:function(e,t){var a="";return e&&(this.checkValue(e[t+"_phone_area_code"])||this.checkValue(e[t+"_phone_number"]))&&(a="".concat(this.checkValue(e[t+"_phone_country_code"],!0)),a+=" ".concat(this.checkValue(e[t+"_phone_area_code"])),a+=" ".concat(this.checkValue(e[t+"_phone_number"]))),a.trim()},constructCRMTableData:function(e,t){return{id:null===e.id?"":e.id,raw:e,"First Name":e.first_name,"Last Name":e.last_name,Name:"".concat(e.first_name," ").concat(e.last_name),Email:e.email,"Home Phone":this.constructPhoneNumber(e.contact_number,"home"),"Mobile Phone":this.constructPhoneNumber(e.contact_number,"mobile"),"Work Phone":this.constructPhoneNumber(e.contact_number,"work"),"Mobile Phone Country Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.mobile_phone_country_code),"Mobile Phone Area Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.mobile_phone_area_code),"Mobile Phone Number":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.mobile_phone_number),"Home Phone Country Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.home_phone_country_code),"Home Phone Area Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.home_phone_area_code),"Home Phone Number":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.home_phone_number),"Work Phone Country Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.work_phone_country_code),"Work Phone Area Code":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.work_phone_area_code),"Work Phone Number":Object(p["isEmpty"])(e.contact_number)?"":this.checkValue(e.contact_number.work_phone_number),Notes:Object(p["isEmpty"])(e.customer_details)?"":this.checkValue(e.customer_details.notes),Facebook:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.facebook_link),Instagram:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.instagram_link),Twitter:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.twitter_link),Google:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.google_plus_link),Linkedin:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.linkedin_link),Youtube:Object(p["isEmpty"])(e.social_links)?"":this.checkValue(e.social_links.youtube_link),company_id:Object(p["isEmpty"])(e.customer_details)?"":this.checkValue(e.customer_details.company_id),"Contact Type":Object(p["isEmpty"])(e.customer_details)?"":this.findContactType(e.customer_details.contact_type),temp_contact_type:Object(p["isEmpty"])(e.customer_details)?"":this.checkValue(e.customer_details.contact_type),Name_Img:Object(p["isEmpty"])(e.customer_details)?"":null===e.customer_details.profile_image?"":this.checkValue(e.customer_details.profile_image.original),"Profile Image":Object(p["isEmpty"])(e.customer_details)?"":null===e.customer_details.profile_image?"":this.checkValue(e.customer_details.profile_image.original),"Home Address":Object(p["isEmpty"])(e.customer_details)?"":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].address):"","Home Street":Object(p["isEmpty"])(e.customer_details)?"":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].street):"","Home City":Object(p["isEmpty"])(e.customer_details)?"":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].city):"","Home State":Object(p["isEmpty"])(e.customer_details)?"":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].state):"","Home Area Code":Object(p["isEmpty"])(e.customer_details)?"":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].postcode):"","Home Country":Object(p["isEmpty"])(e.customer_details)?"":e.customer_details.home_address.length>0?this.checkValue(e.customer_details.home_address[0].country):"","Last Activity":e.updated_at}},findContactType:function(e){if(e){if("Primary"===e)return"Primary";if("Secondary"===e)return"Secondary";var t=this.$store.state.SystemFieldsStore.contact_type.results.find(function(t){return t.id===e});return t?t.value:""}return""},checkEmpty:function(e,t){return Object(p["isEmpty"])(e)?"":this.checkValue(e[t])}},mounted:function(){this.fetchContactList(),this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.$refs.contactListTable.tableHeaders=[this.constructTableHeader("Name","string",!0,!0,!0),this.constructTableHeader("Contact Type","string"),this.constructTableHeader("Work Phone","string"),this.constructTableHeader("Mobile Phone","string"),this.constructTableHeader("Email","string",!0)],this.$refs.contactListTable.rowActions=["View","Edit","Archive"],this.$refs.contactListTable.bulkActions=["Archive"],this.$refs.contactListTable.searchbarPlaceholder="Search"}},It=Ft,Nt=(a("b905"),Object(A["a"])(It,St,At,!1,null,"b81bacaa",null));Nt.options.__file="ContactList.vue";var Pt=Nt.exports,Mt={name:"ViewCompanyDetails",components:{InsInputWrap:I,InsSelectWrap:H,InsTextareaWrap:R,AdminActivities:ht,ProfileHead:_t,GoogleMapDirection:Tt,ContactList:Pt},data:function(){return{showDetails:!1,assignedAdmin:"",companyType:"",industryType:"",activities:void 0,companyData:void 0,constructedAddress:void 0,sourceCRMDetails:"/api/get-company-contact-list-data.json?id=",mapTheme:this.getTheme,headers:{},contactModel:{form_configuration_name:"crm_delete_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{is_enabled:"false"}}}}},companyModel:{form_configuration_name:"crm_delete_company",parent_resource_id:"company",form:{properties:{is_enabled:"false"}}}}},methods:{constructAddress:function(){var e="";return this.checkValue(this.companyData["Home Address"])&&(e=this.companyData["Home Address"]),this.checkValue(this.companyData["Home Street"])&&(e+=" ".concat(this.companyData["Home Street"])),this.checkValue(this.companyData["Home City"])&&(e+=" ".concat(this.companyData["Home City"])),this.checkValue(this.companyData["Home State"])&&(e+=" ".concat(this.companyData["Home State"])),this.checkValue(this.companyData["Home Country"])&&(e+=" ".concat(this.companyData["Home Country"])),this.checkValue(this.companyData["Home Area Code"])&&(e+=" ".concat(this.companyData["Home Area Code"])),e},constructPhoneNumber:function(){var e="";return(this.checkValue(this.companyData["Company Mobile Phone Area Code"])||this.checkValue(this.companyData["Company Mobile Phone Number"]))&&(e="".concat(this.checkValue(this.companyData["Company Mobile Phone Country Code"],!0)),e+=" ".concat(this.checkValue(this.companyData["Company Mobile Phone Area Code"])),e+=" ".concat(this.checkValue(this.companyData["Company Mobile Phone Number"]))),e.trim()},addNewContactHandler:function(){this.$store.commit("pushUserProfile","contact"),this.$store.commit("pushFormType","add"),this.$store.commit("pushFormName","add_new_customer"),this.$store.commit("setAddFromCompany",this.companyData["id"]),this.$router.push("/manage-crm")},checkValue:function(e,t){return e&&"undefined"!==e&&"null"!==e&&e?"".concat(t?"+":"").concat(e):""},archiveCompany:function(){var e=this,t="Are you sure you want to archive this company? This will also archive related contacts.";swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="'.concat(t,'">\n            </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(t){t.value&&e.getAllContacts()})},getAllContacts:function(){var e=this,t="".concat(this.sourceCRMDetails).concat(this.companyData.company_id,"&sortBy=updated_at&orderBy=desc");this.$http.get(t).then(function(t){t.data.items.results.length?e.deleteAllContacts(t.data.items.results):e.deleteCompany()}).catch(this.errorHandler)},deleteAllContacts:function(e){var t=this,a=!0,s=0;e.forEach(function(i){if(a){var o="/api/users/".concat(i.id),r=JSON.stringify(t.contactModel);t.$http.put(o,r,{headers:t.headers}).then(function(a){s++,s===e.length&&t.deleteCompany()}).catch(function(e){t.errorHandler(e),a=!1})}})},deleteCompany:function(){var e=this,t="/api/customizations/".concat(this.companyData.company_id),a=JSON.stringify(this.companyModel);this.$http.put(t,a,{headers:this.headers}).then(function(t){toastIt("success","Successfully archived company.",e.ops),e.$store.commit("removeCompanyOption",e.companyData.company_id),e.$router.push("/customers")}).catch(this.errorHandler)},errorHandler:function(e){console.error("error...",e),toastIt("error","Failed to archive company.",this.ops)},editCompanyHandler:function(){this.$store.commit("pushUserData",this.companyData),this.$store.commit("pushFormType","edit"),this.$router.push("/manage-company")},mapInit:function(){this.mapTheme=this.getTheme;var e=document.getElementById("profileMap"),t=new google.maps.Geocoder,a=new google.maps.Map(e,{scrollwheel:!1,draggable:!0,disableDoubleClickZoom:!0,zoomControll:!1,zoom:16,styles:this.mapTheme});this.mapGetCoordinates(t,a)},mapGetCoordinates:function(e,t){var a=this.constructedAddress;e.geocode({address:a},function(e,a){if("OK"===a){t.setCenter(e[0].geometry.location);new google.maps.Marker({map:t,position:e[0].geometry.location})}else console.error("Geocode was not successful for the following reason: "+a)})},getDataFromStore:function(e,t){var a=this,s=this.$store.state.SystemFieldsStore[t],i=s.results.find(function(t){return t.id===a.companyData[e]});return i||!1},checkURL:function(e){var t=this.checkValue(e);return t?t.includes("https://")?t:t.includes("http://")?t:"//".concat(t):""},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Customer Details"):setTimeout(function(){e.setInsRendererLabel()},300)}},created:function(){this.companyData=JSON.parse(JSON.stringify(this.$store.state.CrmStore.companyData)),this.companyData.Company?(this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.constructedAddress=this.constructAddress(),this.assignedAdmin=this.getDataFromStore("Assigned To","administratorList"),this.companyType=this.getDataFromStore("Company Type","company_type"),this.industryType=this.getDataFromStore("Industry Type","industry_type")):this.$router.push("/customers")},mounted:function(){this.setInsRendererLabel(),this.constructedAddress&&this.mapInit()}},xt=Mt,jt=(a("7490"),Object(A["a"])(xt,rt,nt,!1,null,"1f704d81",null));jt.options.__file="ViewCompanyDetails.vue";var Ht=jt.exports,Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-container-full"},[e.contactData?a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-8 medium-12 small-12 margin-bottom-30"},[a("ins-card",{attrs:{steady:""}},[a("div",{staticClass:"grid-x grid-padding-x"},[a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("ProfileHead",{attrs:{"profile-name":e.checkValue(e.contactData["Contact"]),"profile-img":e.checkValue(e.contactData["Contact_Img"]),"profile-facebook":e.checkValue(e.contactData["Facebook"]),"profile-google-plus":e.checkValue(e.contactData["Google"]),"profile-instagram":e.checkValue(e.contactData["Instagram"]),"profile-linkedin":e.checkValue(e.contactData["Linkedin"]),"profile-twitter":e.checkValue(e.contactData["Twitter"]),"profile-youtube":e.checkValue(e.contactData["Youtube"])}}),a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("div",{staticClass:"grid-x"},[a("div",{staticClass:"cell large-6 medium-12 small-12"},[a("table",{staticClass:"information-wrap"},[a("tr",[a("td",{staticClass:"td-label"},[e._v("Work Phone")]),a("td",[e._v(e._s(e.checkValue(e.contactData["Work Phone"])))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Mobile Phone")]),a("td",[e._v(e._s(e.checkValue(e.contactData["Mobile Phone"])))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Home Phone")]),a("td",[e._v(e._s(e.checkValue(e.contactData["Home Phone"])))])]),a("tr",[a("td",{staticClass:"td-label"},[e._v("Email")]),a("td",[e._v(e._s(e.contactData["Email"]))])])])]),a("div",{staticClass:"cell large-6 medium-12 small-12"},[a("GoogleMapDirection",{attrs:{address:e.constructedAddress}})],1)])]),a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("div",{staticClass:"notes-wrap"},[e._v("\n                "+e._s(e.contactData["Notes"])+"\n              ")])]),a("div",{staticClass:"cell large-12 medium-12 small-12 text-right"},[a("ins-button",{attrs:{label:"EDIT CONTACT",outlined:""},on:{onClickInsButton:e.editContactHandler}})],1)],1)])])],1),a("div",{staticClass:"cell large-4 medium-12 small-12 activities-if margin-bottom-30"},[a("AdminActivities",{attrs:{activities:e.activities}})],1),a("div",{staticClass:"cell large-12 medium-12 small-12"},[a("ins-button",{attrs:{label:"ARCHIVE CONTACT",color:"negative"},on:{onClickInsButton:e.archiveContact}})],1)]):e._e()])},Ot=[],Lt={name:"ViewContactDetails",components:{InsInputWrap:I,InsSelectWrap:H,AdminActivities:ht,ProfileHead:_t,GoogleMapDirection:Tt},data:function(){return{profileImg:"",activities:void 0,contactData:void 0,constructedAddress:void 0,formModel:{form_configuration_name:"crm_delete_customer",form:{profiles_attributes:{customer_attributes:{properties_attributes:{is_enabled:"false"}}}}},mapTheme:this.getTheme}},methods:{constructAddress:function(){var e="";return this.contactData["Home Address"]&&(e=this.contactData["Home Address"]),this.contactData["Home Street"]&&(e+=" ".concat(this.contactData["Home Street"])),this.contactData["Home City"]&&(e+=" ".concat(this.contactData["Home City"])),this.contactData["Home State"]&&(e+=" ".concat(this.contactData["Home State"])),this.contactData["Home Country"]&&(e+=" ".concat(this.contactData["Home Country"])),this.contactData["Home Area Code"]&&(e+=" ".concat(this.contactData["Home Area Code"])),e},constructPhoneNumber:function(e){var t="";return(this.checkValue(this.contactData.contact_number[e+"_phone_area_code"])||this.checkValue(this.contactData.contact_number[e+"_phone_number"]))&&(t="".concat((this.checkValue(this.contactData.contact_number[e+"_phone_country_code"]),!0)),t+=" ".concat(this.checkValue(this.contactData.contact_number[e+"_phone_area_code"])),t+=" ".concat(this.checkValue(this.contactData.contact_number[e+"_phone_number"]))),t.trim()},checkValue:function(e,t){return e&&"undefined"!==e&&"null"!==e&&e?"".concat(t?"+":"").concat(e):""},editContactHandler:function(){this.$store.commit("pushUserData",this.contactData),this.$store.commit("pushFormType","edit"),this.$router.push("/manage-crm")},archiveContact:function(){var e=this;swal({title:"",html:'\n            <ins-loader\n              state-icon="warning"\n              icon-color="warning"\n              state-message="Are you sure you want to archive these items?">\n            </ins-loader>',type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(t){t.value&&e.deleteContact()})},deleteContact:function(e){var t=this,a="/api/users/".concat(this.contactData.id),s=JSON.stringify(this.formModel);this.$http.put(a,s,{headers:this.headers}).then(function(e){toastIt("success","Contact has been archived.",t.ops),t.$router.push("/customers")}).catch(function(e){toastIt("error","Failed to archive user. Please try again.",t.ops)})},mapInit:function(){this.mapTheme=this.getTheme;var e=document.getElementById("profileMap"),t=new google.maps.Geocoder,a=new google.maps.Map(e,{scrollwheel:!1,draggable:!0,disableDoubleClickZoom:!0,zoomControll:!1,zoom:16,styles:this.mapTheme});this.mapGetCoordinates(t,a)},mapGetCoordinates:function(e,t){var a=this.constructedAddress;e.geocode({address:a},function(e,a){if("OK"===a){t.setCenter(e[0].geometry.location);new google.maps.Marker({map:t,position:e[0].geometry.location})}else console.error("Geocode was not successful for the following reason: "+a)})},setInsRendererLabel:function(){var e=this,t=document.querySelector("ins-renderer");t.updateRouteLabel?t.updateRouteLabel("Contact Details"):setTimeout(function(){e.setInsRendererLabel()},300)}},created:function(){this.contactData=JSON.parse(JSON.stringify(this.$store.state.CrmStore.contactData)),this.contactData?(this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.constructedAddress=this.constructAddress()):this.$router.push("/customers")},mounted:function(){this.setInsRendererLabel(),this.constructedAddress&&this.mapInit()}},$t=Lt,Bt=(a("e4c4"),Object(A["a"])($t,Et,Ot,!1,null,"6f38e5ae",null));Bt.options.__file="ViewContactDetails.vue";var Vt=Bt.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x margin-bottom-30"},[a("div",{staticClass:"large-4 medium-12 small-12 cell"},[a("SystemField",{attrs:{heading:"Company Type",type:"company_type"}})],1),a("div",{staticClass:"large-4 medium-12 small-12 cell"},[a("SystemField",{attrs:{heading:"Industry Type",type:"industry_type"}})],1),a("div",{staticClass:"large-4 medium-12 small-12 cell"},[a("SystemField",{attrs:{heading:"Contact Type",type:"contact_type"}})],1)])])},Wt=[],zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-field-wrap"},[a("h2",[e._v(e._s(e.heading))]),e.loading?e._e():a("ins-base-table",{ref:"systemFieldTable",attrs:{"without-search":"","static-table":""},on:{onPaginationChange:e.onPaginationChangeHandler}},[a("ins-base-table-row",[a("ins-base-table-td",[a("div",{staticClass:"new-system-field-wrap"},[a("InsInputWrap",{attrs:{placeholder:"Please enter "+e.heading},model:{value:e.newSystemField,callback:function(t){e.newSystemField=t},expression:"newSystemField"}}),a("ins-button",{ref:"newSystemFieldButton",attrs:{label:"ADD",solid:"",loading:e.addingSystemField},on:{onClickInsButton:e.addSystemField}})],1)])],1),e._l(e.fields.results,function(t){return e.loading?e._e():a("ins-base-table-row",{key:t.id},[a("ins-base-table-td",{staticClass:"system-field-wrap__data"},[t.editMode?e._e():a("div",{staticClass:"view-mode"},[e._v("\n          "+e._s(t.value)+"\n        ")]),t.editMode?a("div",{staticClass:"edit-mode"},[a("InsInputWrap",{attrs:{placeholder:"Please enter "+e.heading},model:{value:t.tempValue,callback:function(a){e.$set(t,"tempValue",a)},expression:"field.tempValue"}}),a("div",{staticClass:"edit-mode__buttons"},[a("ins-button",{attrs:{label:"update",size:"small"},on:{onClickInsButton:function(a){e.updateSystemField(t)}}}),a("ins-button",{attrs:{label:"cancel",size:"small"},on:{onClickInsButton:function(a){e.cancelEditMode(t)}}})],1)],1):e._e(),t.editMode?e._e():a("div",{staticClass:"actions-wrap"},[a("button",{staticClass:"action edit",on:{click:function(a){e.enableEditMode(t)}}},[e._v("\n            Edit\n          ")]),a("span",{staticClass:"seperator"},[e._v("|")]),a("button",{staticClass:"action archive",on:{click:function(a){e.archiveSystemField(t)}}},[e._v("\n            Archive\n          ")])])])],1)})],2)],1)},Ut=[],Kt={name:"SystemField",components:{InsInputWrap:I},props:{heading:String,type:String},data:function(){return{fields:{results:[]},loading:!1,newSystemField:"",addingSystemField:!1,pageNumber:1,pageSize:10,headers:{},sourceURL:"/api/customizations/",systemFieldModel:{form_configuration_name:"add_system_fields",parent_resource_id:"system_fields",form:{properties:{key:"",value:"",is_enabled:"true"}}}}},methods:{enableEditMode:function(e){e.editMode=!0},cancelEditMode:function(e){e.tempValue=e.value,e.editMode=!1},mutateSystemField:function(e,t,a){this.systemFieldModel.form.properties.key=this.type,this.systemFieldModel.form.properties.value=t.tempValue;var s="".concat(this.sourceURL).concat("put"===e?t.id:""),i=JSON.stringify(this.systemFieldModel),o={headers:this.headers};this.$http[e](s,i,o).then(a).catch(this.errorHandler)},addSystemField:function(){var e=this;this.addingSystemField=!0;var t=this.newSystemField.toLowerCase();if("contact_type"===this.type&&"primary"===t&&"secondary"===t)this.addingSystemField=!1,toastIt("error","".concat(this.newSystemField," is a reserved system field for Contact Type."),this.ops);else{var a={tempValue:this.newSystemField};this.mutateSystemField("post",a,function(){setTimeout(function(){toastIt("success","New system field created successfully.",e.ops),e.addingSystemField=!1,e.fetchSystemFields(),e.$store.dispatch("fetchSystemFields",e.type)},1e3)})}},updateSystemField:function(e){var t=this;this.mutateSystemField("put",e,function(a){e.value=e.tempValue,e.editMode=!1,setTimeout(function(){t.$store.dispatch("fetchSystemFields",t.type)},1e3)})},archiveSystemField:function(e){var t=this,a="Are you sure you want to delete this System Field?";swal({title:"",html:'\n          <ins-loader\n            state-icon="warning"\n            icon-color="warning"\n            state-message="'.concat(a,'">\n          </ins-loader>'),type:"",showCancelButton:!0,confirmButtonText:"Archive"}).then(function(a){a.value&&(t.systemFieldModel.form.properties.is_enabled=!1,t.mutateSystemField("put",e,function(){setTimeout(function(){t.fetchSystemFields(),t.$store.dispatch("fetchSystemFields",t.type)},1e3)}))})},onPaginationChangeHandler:function(e){this.pageNumber=e.detail.pageNumber,this.pageSize=e.detail.pageSize,this.fetchSystemFields()},fetchSystemFields:function(){var e=this;this.loading=!0,this.loaderStateHandler("","Loading system fields...","processing");var t="/api/get-system-fields-data.json?key=".concat(this.type,"&page=").concat(this.pageNumber,"&size=").concat(this.pageSize);this.$http.get(t).then(function(t){t.data.items.results.map(e.constructResults),e.fields=t.data.items,e.loading=!1,e.setupTable()}).catch(this.errorHandler)},constructResults:function(e){return e.tempValue=e.value,e.editMode=!1,e},errorHandler:function(e){console.error("error...",e),this.addingSystemField=!1,toastIt("error","Failed to load System Fields.",this.ops)},loaderStateHandler:function(e,t,a){this.$refs.systemFieldTable.loadingScreen=!0,this.$refs.systemFieldTable.loaderTitle=e,this.$refs.systemFieldTable.loaderMessage=t,this.$refs.systemFieldTable.loaderIcon=a},setupTable:function(){var e=this;setTimeout(function(){e.$refs.systemFieldTable.totalCount=e.fields.total_entries,e.$refs.systemFieldTable.pageNumber=e.pageNumber,e.$refs.systemFieldTable.pageSize=e.pageSize,e.$refs.systemFieldTable.loadingScreen=!1},300)}},mounted:function(){this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.fetchSystemFields()}},Jt=Kt,Yt=(a("d20d"),Object(A["a"])(Jt,zt,Ut,!1,null,null,null));Yt.options.__file="SystemField.vue";var qt=Yt.exports,Gt={name:"SystemFields",components:{SystemField:qt},data:function(){return{}},methods:{},mounted:function(){}},Xt=Gt,Qt=(a("535c"),Object(A["a"])(Xt,Rt,Wt,!1,null,null,null));Qt.options.__file="SystemFields.vue";var Zt=Qt.exports,ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid-container-full"},[a("div",{staticClass:"grid-x grid-padding-x margin-bottom-30"},[a("div",{staticClass:"large-4 medium-12 small-12 cell"},[a("div",{staticClass:"grid-x"},[a("div",{staticClass:"large-12 medium-12 small-12 cell"},[a("ins-card",{attrs:{steady:""}},[a("InsInputWrap",{attrs:{label:"Google Maps API Keys",placeholder:"Enter your API key here"},model:{value:e.tempGoogleMapsApiKey,callback:function(t){e.tempGoogleMapsApiKey=t},expression:"tempGoogleMapsApiKey"}})],1)],1),a("div",{staticClass:"large-12 medium-12 small-12 cell text-right button-wrap"},[a("ins-button",{attrs:{label:"SAVE",solid:"",loading:e.saving},on:{onClickInsButton:e.updateSystemFieldHandler}})],1)])])])])},ta=[],aa={name:"ApiKeys",components:{InsInputWrap:I},computed:Object(Te["b"])({googleMapsApiKey:function(e){return e.SystemFieldsStore.google_maps_api_key}}),data:function(){return{tempGoogleMapsApiKey:"",saving:!1,method:"post",headers:{},sourceURL:"/api/customizations/",systemFieldModel:{form_configuration_name:"add_system_fields",parent_resource_id:"system_fields",form:{properties:{key:"google_maps_api_key",value:"",is_enabled:"true"}}}}},watch:{googleMapsApiKey:function(){this.updateTempValue()}},methods:{updateSystemFieldHandler:function(){var e=this;this.saving=!0,this.systemFieldModel.form.properties.value=this.tempGoogleMapsApiKey;var t="".concat(this.sourceURL);"put"===this.method&&(t+="".concat(this.googleMapsApiKey.results[0].id));var a=JSON.stringify(this.systemFieldModel),s={headers:this.headers};this.$http[this.method](t,a,s).then(function(t){toastIt("success","Successfully updated API Key",e.ops),setTimeout(function(){window.location.reload(!0)},1e3)}).catch(this.errorHandler)},errorHandler:function(e){console.error("error...",e),this.saving=!1,toastIt("error","Failed to update API Key",this.ops)},updateTempValue:function(){this.googleMapsApiKey.results.length&&(this.tempGoogleMapsApiKey=this.googleMapsApiKey.results[0].value,this.method="put")}},mounted:function(){this.headers=JSON.parse(JSON.stringify(this.apiHeader)),this.updateTempValue()}},sa=aa,ia=(a("5c2c"),Object(A["a"])(sa,ea,ta,!1,null,null,null));ia.options.__file="ApiKeys.vue";var oa=ia.exports;i["a"].use(o["a"]);var ra=new o["a"]({routes:[{path:"/overview",name:"overview",component:ae},{path:"/admin-users",name:"adminUsers",component:le},{path:"/manage-admin-user",name:"manageAdminUser",component:fe},{path:"/my-profile",name:"myProfile",component:Ce},{path:"/customers",name:"Customers",component:Ie},{path:"/manage-crm",name:"manageCRM",component:Ve},{path:"/manage-company",name:"manageCompany",component:Je},{path:"/cases",name:"Cases",component:Ze},{path:"/case-details",name:"CaseDetails",component:ot},{path:"/view-company",name:"ViewCompany",component:Ht},{path:"/view-contact",name:"ViewContact",component:Vt},{path:"/system-fields",name:"SystemFields",component:Zt},{path:"/api-keys",name:"ApiKeys",component:oa}]}),na={state:{userData:{},formType:""},mutations:{pushUserData:function(e,t){e.userData=t},pushFormType:function(e,t){e.formType=t},pushFormName:function(e,t){e.formName=t},pushUserProfile:function(e,t){e.userProfile=t}}},la=na,ca={state:{userData:{},companyData:{},contactData:{},formType:"",formName:"",userProfile:"",timeline:[],timelineId:"",activity:{attributes:{attendees_id:[],attendees:[],attachment:[],client_type:"",company_uuid:"",site_id:"",date:"",duration:"",entity_id:"",file_name:"",file_note:"",first_name:"",staff_id:"",last_name:"",notes:"",subject:"",time:"",type:"meeting"},type:"activities"},mode:"ADD",allCustomers:[],totalCountCustomers:0,addFromCompany:!1,companyOptions:[],mutatingCompanies:!1},mutations:{pushUserData:function(e,t){e.userData=t},pushFormType:function(e,t){e.formType=t},pushFormName:function(e,t){e.formName=t},pushUserProfile:function(e,t){e.userProfile=t},setActivity:function(e,t){e.activity=t},setMode:function(e,t){e.mode=t},setTimelineId:function(e,t){e.timelineId=t},setTimeline:function(e,t){e.timeline=t},setAddFromCompany:function(e,t){e.addFromCompany=t},setCompanyData:function(e,t){e.companyData=t},setContactData:function(e,t){e.contactData=t},setCompanyOptions:function(e,t){e.companyOptions=t.map(function(e){return{id:e.id,label:e.company_name}})},pushCompanyOption:function(e,t){e.mutatingCompanies=!0,e.companyOptions.push(t),setTimeout(function(){e.mutatingCompanies=!1},300)},removeCompanyOption:function(e,t){e.companyOptions.filter(function(e){return e.id!==t})}}},ua=ca,da={state:{caseData:{},mode:"View"},mutations:{pushCaseData:function(e,t){e.caseData=t}}},ma=da,ha={state:{contact_type:{results:[]},company_type:{results:[]},industry_type:{results:[]},google_maps_api_key:{results:[]},administratorList:[],swalContactTypes:{}},mutations:{setSystemField:function(e,t){e[t.type]=t.items},setSwalContactTypes:function(e,t){e.swalContactTypes["Secondary"]="Secondary",t.forEach(function(t){e.swalContactTypes[t.id]=t.value})},setAdministratorList:function(e,t){e.administratorList=t}},actions:{fetchSystemFields:function(e,t){var a=this,s="/api/get-system-fields-data.json?key=".concat(t);this._vm.$http.get(s).then(function(a){e.commit("setSystemField",{type:t,items:a.data.items}),"contact_type"===t&&e.commit("setSwalContactTypes",a.data.items.results)}).catch(function(e){toastIt("error","Failed to load system fields.",a.ops)})}}},pa=ha;i["a"].use(Te["a"]);var fa=new Te["a"].Store({modules:{AdminStore:la,CrmStore:ua,CaseStore:ma,SystemFieldsStore:pa}}),ba={data:function(){return{insRendererEl:void 0,get apiHeader(){var e={"X-CSRF-Token":"","X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"};return"localhost"!==window.location.hostname&&(e["X-CSRF-Token"]=JSON.parse(document.getElementById("formConfig").innerHTML)),e},get ops(){var e={closeHtml:'<button><i class="icon-close-1"></i></button>',closeButton:!0,timeOut:0,extendedTimeOut:0,preventDuplicates:!0};return e},get getTheme(){var e=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}];return e}}},methods:{getGoogleAPIKey:function(){var e="/api/get-system-fields-data.json?key=google_maps_api_key";return this.$http.get(e).then(function(e){return e.data.items.results.length?e.data.items.results[0].value:"-"}).catch(this.errorHandler)},toastNotif:function(e,t){var a={closeHtml:'<button><i class="icon-close-1"></i></button>',closeButton:!0,timeOut:0,extendedTimeOut:0,preventDuplicates:!0};toastIt(e,t,a)}}},ya=["ins-card","ins-filter","ins-filter-item","ins-datepicker","ins-sparkline","ins-line-chart","ins-searchbar","ins-table","ins-tr","ins-th","ins-th-checkbox","ins-td","ins-td-checkbox","ins-action","ins-action-item","ins-loader","ins-button","ins-dropdown","ins-bar-chart","ins-radio","ins-toggle-switch","ins-input","ins-base-table","ins-base-table-row","ins-base-table-th","ins-base-table-td","ins-input-tel","ins-select","ins-select-option","ins-textarea","ins-image-picker"];i["a"].use(o["a"]),i["a"].use(c.a,n.a),i["a"].config.productionTip=!1,i["a"].config.ignoredElements=Object(s["a"])(ya),i["a"].mixin(ba),new i["a"]({router:ra,store:fa,render:function(e){return e(G)}}).$mount("#app")},5831:function(e,t,a){},5988:function(e,t,a){"use strict";var s=a("abde"),i=a.n(s);i.a},"5bd2":function(e,t,a){},"5c2c":function(e,t,a){"use strict";var s=a("efea"),i=a.n(s);i.a},"5e3d":function(e,t,a){},6247:function(e,t,a){"use strict";var s=a("5225"),i=a.n(s);i.a},7211:function(e,t,a){},7490:function(e,t,a){"use strict";var s=a("5179"),i=a.n(s);i.a},"7d7d":function(e,t,a){"use strict";var s=a("33a9"),i=a.n(s);i.a},8047:function(e,t,a){"use strict";var s=a("c6b1"),i=a.n(s);i.a},"80c5":function(e,t,a){"use strict";var s=a("0736"),i=a.n(s);i.a},"8b75":function(e,t,a){"use strict";var s=a("5e3d"),i=a.n(s);i.a},"8d19":function(e,t,a){"use strict";var s=a("9020"),i=a.n(s);i.a},9020:function(e,t,a){},"996a":function(e,t,a){"use strict";var s=a("3511"),i=a.n(s);i.a},"9cde":function(e,t,a){},"9d14":function(e,t,a){"use strict";var s=a("0088"),i=a.n(s);i.a},a215:function(e,t,a){"use strict";var s=a("9cde"),i=a.n(s);i.a},a300:function(e,t,a){"use strict";var s=a("1131"),i=a.n(s);i.a},a579:function(e,t,a){"use strict";var s=a("a624"),i=a.n(s);i.a},a624:function(e,t,a){},abde:function(e,t,a){},b905:function(e,t,a){"use strict";var s=a("14db"),i=a.n(s);i.a},c114:function(e,t,a){},c2c4:function(e,t,a){},c4f9:function(e,t,a){"use strict";var s=a("5831"),i=a.n(s);i.a},c6b1:function(e,t,a){},d20d:function(e,t,a){"use strict";var s=a("4b91"),i=a.n(s);i.a},e4c4:function(e,t,a){"use strict";var s=a("5bd2"),i=a.n(s);i.a},e95e:function(e,t,a){},efea:function(e,t,a){},f0bd:function(e,t,a){"use strict";var s=a("e95e"),i=a.n(s);i.a},fac5:function(e,t,a){"use strict";var s=a("0783"),i=a.n(s);i.a},fc58:function(e,t,a){}});
//# sourceMappingURL=app.ba7c5881.js.map